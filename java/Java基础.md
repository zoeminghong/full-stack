**è¯·è¯´è¯´é¢å‘å¯¹è±¡çš„ç‰¹å¾ï¼Ÿ**

å››ç‚¹ï¼š**å°è£…**ã€**ç»§æ‰¿**ã€**å¤šæ€**ã€**æŠ½è±¡**

1ï¼‰å°è£…

å°è£…ï¼Œç»™å¯¹è±¡æä¾›äº†éšè—å†…éƒ¨ç‰¹æ€§å’Œè¡Œä¸ºçš„èƒ½åŠ›ã€‚å¯¹è±¡æä¾›ä¸€äº›èƒ½è¢«å…¶ä»–å¯¹è±¡è®¿é—®çš„æ–¹æ³•æ¥æ”¹å˜å®ƒå†…éƒ¨çš„æ•°æ®ã€‚åœ¨ Java å½“ä¸­ï¼Œæœ‰ 4 ç§ä¿®é¥°ç¬¦ï¼š `default`ã€`public`ã€`private` å’Œ `protected` ã€‚**æ¯ä¸€ç§ä¿®é¥°ç¬¦ç»™å…¶ä»–çš„ä½äºåŒä¸€ä¸ªåŒ…æˆ–è€…ä¸åŒåŒ…ä¸‹é¢å¯¹è±¡èµ‹äºˆäº†ä¸åŒçš„è®¿é—®æƒé™ã€‚**

ä¸‹é¢åˆ—å‡ºäº†ä½¿ç”¨å°è£…çš„ä¸€äº›å¥½å¤„ï¼š

- é€šè¿‡éšè—å¯¹è±¡çš„å±æ€§æ¥ä¿æŠ¤å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€ã€‚
- æé«˜äº†ä»£ç çš„å¯ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå› ä¸ºå¯¹è±¡çš„è¡Œä¸ºå¯ä»¥è¢«å•ç‹¬çš„æ”¹å˜æˆ–è€…æ˜¯æ‰©å±•ã€‚
- ç¦æ­¢å¯¹è±¡ä¹‹é—´çš„ä¸è‰¯äº¤äº’æé«˜æ¨¡å—åŒ–ã€‚

2ï¼‰ç»§æ‰¿

ç»§æ‰¿ï¼Œç»™å¯¹è±¡æä¾›äº†ä»åŸºç±»è·å–å­—æ®µå’Œæ–¹æ³•çš„èƒ½åŠ›ã€‚**ç»§æ‰¿æä¾›äº†ä»£ç çš„é‡ç”¨è¡Œ**ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸ä¿®æ”¹ç±»çš„æƒ…å†µä¸‹ç»™ç°å­˜çš„ç±»æ·»åŠ æ–°ç‰¹æ€§ã€‚

3ï¼‰å¤šæ€

å¤šæ€ï¼Œæ˜¯ç¼–ç¨‹è¯­è¨€**ç»™ä¸åŒçš„åº•å±‚æ•°æ®ç±»å‹åšç›¸åŒçš„æ¥å£å±•ç¤ºçš„ä¸€ç§èƒ½åŠ›**ã€‚ä¸€ä¸ªå¤šæ€ç±»å‹ä¸Šçš„æ“ä½œï¼Œå¯ä»¥åº”ç”¨åˆ°å…¶ä»–ç±»å‹çš„å€¼ä¸Šé¢ã€‚

4ï¼‰æŠ½è±¡

æŠ½è±¡ï¼Œæ˜¯**æŠŠæƒ³æ³•ä»å…·ä½“çš„å®ä¾‹ä¸­åˆ†ç¦»å‡ºæ¥çš„æ­¥éª¤**ï¼Œå› æ­¤ï¼Œè¦æ ¹æ®ä»–ä»¬çš„åŠŸèƒ½è€Œä¸æ˜¯å®ç°ç»†èŠ‚æ¥åˆ›å»ºç±»ã€‚

Java æ”¯æŒåˆ›å»ºåªæš´éœ²æ¥å£è€Œä¸åŒ…å«æ–¹æ³•å®ç°çš„æŠ½è±¡çš„ç±»ã€‚è¿™ç§æŠ½è±¡æŠ€æœ¯çš„ä¸»è¦ç›®çš„æ˜¯æŠŠç±»çš„è¡Œä¸ºå’Œå®ç°ç»†èŠ‚åˆ†ç¦»å¼€ã€‚

**é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«ï¼Ÿ**

- é¢å‘è¿‡ç¨‹
  - ä¼˜ç‚¹ï¼šæ€§èƒ½æ¯”é¢å‘å¯¹è±¡é«˜ï¼Œå› ä¸ºç±»è°ƒç”¨æ—¶éœ€è¦å®ä¾‹åŒ–ï¼Œå¼€é”€æ¯”è¾ƒå¤§ï¼Œæ¯”è¾ƒæ¶ˆè€—èµ„æºã€‚æ¯”å¦‚ï¼Œå•ç‰‡æœºã€åµŒå…¥å¼å¼€å‘ã€Linux/Unix ç­‰ä¸€èˆ¬é‡‡ç”¨é¢å‘è¿‡ç¨‹å¼€å‘ï¼Œæ€§èƒ½æ˜¯æœ€é‡è¦çš„å› ç´ ã€‚
  - ç¼ºç‚¹ï¼šæ²¡æœ‰é¢å‘å¯¹è±¡æ˜“ç»´æŠ¤ã€æ˜“å¤ç”¨ã€æ˜“æ‰©å±•ã€‚
- é¢å‘å¯¹è±¡
  - ä¼˜ç‚¹ï¼šæ˜“ç»´æŠ¤ã€æ˜“å¤ç”¨ã€æ˜“æ‰©å±•ï¼Œç”±äºé¢å‘å¯¹è±¡æœ‰å°è£…ã€ç»§æ‰¿ã€å¤šæ€æ€§çš„ç‰¹æ€§ï¼Œå¯ä»¥è®¾è®¡å‡ºä½è€¦åˆçš„ç³»ç»Ÿï¼Œä½¿ç³»ç»Ÿæ›´åŠ çµæ´»ã€æ›´åŠ æ˜“äºç»´æŠ¤ã€‚
  - ç¼ºç‚¹ï¼šæ€§èƒ½æ¯”é¢å‘è¿‡ç¨‹ä½ã€‚

## ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ

**ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿ**

> è¿™ä¸ªé—®é¢˜ï¼Œé¢è¯•å®˜å¯ä»¥è¡ç”Ÿæé—®ï¼ŒJava æ˜¯ç¼–è¯‘æ‰§è¡Œçš„è¯­è¨€ï¼Œè¿˜æ˜¯è§£é‡Šæ‰§è¡Œçš„è¯­è¨€ã€‚

Java ä¸­å¼•å…¥äº†è™šæ‹Ÿæœºçš„æ¦‚å¿µï¼Œå³åœ¨æœºå™¨å’Œç¼–è¯‘ç¨‹åºä¹‹é—´åŠ å…¥äº†ä¸€å±‚æŠ½è±¡çš„è™šæ‹Ÿçš„æœºå™¨ã€‚è¿™å°è™šæ‹Ÿçš„æœºå™¨åœ¨ä»»ä½•å¹³å°ä¸Šéƒ½æä¾›ç»™ç¼–è¯‘ç¨‹åºä¸€ä¸ªçš„å…±åŒçš„æ¥å£ã€‚

ç¼–è¯‘ç¨‹åºåªéœ€è¦é¢å‘è™šæ‹Ÿæœºï¼Œç”Ÿæˆè™šæ‹Ÿæœºèƒ½å¤Ÿç†è§£çš„ä»£ç ï¼Œç„¶åç”±è§£é‡Šå™¨æ¥å°†è™šæ‹Ÿæœºä»£ç è½¬æ¢ä¸ºç‰¹å®šç³»ç»Ÿçš„æœºå™¨ç æ‰§è¡Œã€‚åœ¨ Java ä¸­ï¼Œè¿™ç§ä¾›è™šæ‹Ÿæœºç†è§£çš„ä»£ç å«åšå­—èŠ‚ç ï¼ˆå³æ‰©å±•åä¸º `.class` çš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚

æ¯ä¸€ç§å¹³å°çš„è§£é‡Šå™¨æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯å®ç°çš„è™šæ‹Ÿæœºæ˜¯ç›¸åŒçš„ã€‚Java æºç¨‹åºç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘åå˜æˆå­—èŠ‚ç ï¼Œå­—èŠ‚ç ç”±è™šæ‹Ÿæœºè§£é‡Šæ‰§è¡Œï¼Œè™šæ‹Ÿæœºå°†æ¯ä¸€æ¡è¦æ‰§è¡Œçš„å­—èŠ‚ç é€ç»™è§£é‡Šå™¨ï¼Œè§£é‡Šå™¨å°†å…¶ç¿»è¯‘æˆç‰¹å®šæœºå™¨ä¸Šçš„æœºå™¨ç ï¼Œç„¶ååœ¨ç‰¹å®šçš„æœºå™¨ä¸Šè¿è¡Œã€‚**è¿™ä¹Ÿå°±æ˜¯è§£é‡Šäº† Java çš„ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜çš„ç‰¹ç‚¹**ã€‚

```
Java æºä»£ç 
=> ç¼–è¯‘å™¨ => JVM å¯æ‰§è¡Œçš„ Java å­—èŠ‚ç (å³è™šæ‹ŸæŒ‡ä»¤)
=> JVM => JVM ä¸­è§£é‡Šå™¨ => æœºå™¨å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ç  => ç¨‹åºè¿è¡Œ
```

**é‡‡ç”¨å­—èŠ‚ç çš„å¥½å¤„ï¼Ÿ**

Java è¯­è¨€é€šè¿‡å­—èŠ‚ç çš„æ–¹å¼ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†**ä¼ ç»Ÿè§£é‡Šå‹è¯­è¨€æ‰§è¡Œæ•ˆç‡ä½çš„é—®é¢˜ï¼ŒåŒæ—¶åˆä¿ç•™äº†è§£é‡Šå‹è¯­è¨€å¯ç§»æ¤çš„ç‰¹ç‚¹ã€‚**æ‰€ä»¥ Java ç¨‹åºè¿è¡Œæ—¶æ¯”è¾ƒé«˜æ•ˆï¼Œè€Œä¸”ï¼Œç”±äºå­—èŠ‚ç å¹¶ä¸ä¸“å¯¹ä¸€ç§ç‰¹å®šçš„æœºå™¨ï¼Œå› æ­¤ï¼ŒJavaç¨‹åºæ— é¡»é‡æ–°ç¼–è¯‘ä¾¿å¯åœ¨å¤šç§ä¸åŒçš„è®¡ç®—æœºä¸Šè¿è¡Œã€‚

> è§£é‡Šå‹è¯­è¨€ï¼šè§£é‡Šå‹è¯­è¨€ï¼Œæ˜¯åœ¨è¿è¡Œçš„æ—¶å€™å°†ç¨‹åºç¿»è¯‘æˆæœºå™¨è¯­è¨€ã€‚è§£é‡Šå‹è¯­è¨€çš„ç¨‹åºä¸éœ€è¦åœ¨è¿è¡Œå‰ç¼–è¯‘ï¼Œåœ¨è¿è¡Œç¨‹åºçš„æ—¶å€™æ‰ç¿»è¯‘ï¼Œä¸“é—¨çš„è§£é‡Šå™¨è´Ÿè´£åœ¨æ¯ä¸ªè¯­å¥æ‰§è¡Œçš„æ—¶å€™è§£é‡Šç¨‹åºä»£ç ã€‚è¿™æ ·è§£é‡Šå‹è¯­è¨€æ¯æ‰§è¡Œä¸€æ¬¡å°±è¦ç¿»è¯‘ä¸€æ¬¡ï¼Œæ•ˆç‡æ¯”è¾ƒä½ã€‚â€”â€”ç™¾åº¦ç™¾ç§‘
>
> ä¾‹å¦‚ï¼šPythonã€PHP ã€‚

**char å‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜è´®ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ**

- åœ¨ C è¯­è¨€ä¸­ï¼Œchar ç±»å‹å  1 ä¸ªå­—èŠ‚ï¼Œè€Œæ±‰å­—å  2 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä¸èƒ½å­˜å‚¨ã€‚
- åœ¨ Java è¯­è¨€ä¸­ï¼Œchar ç±»å‹å  2 ä¸ªå­—èŠ‚ï¼Œè€Œä¸” Java é»˜è®¤é‡‡ç”¨ Unicode ç¼–ç ï¼Œä¸€ä¸ª Unicode ç æ˜¯ 16 ä½ï¼Œæ‰€ä»¥ä¸€ä¸ª Unicode ç å ä¸¤ä¸ªå­—èŠ‚ï¼ŒJava ä¸­æ— è®ºæ±‰å­—è¿˜æ˜¯è‹±æ–‡å­—æ¯ï¼Œ**éƒ½æ˜¯ç”¨ Unicode ç¼–ç æ¥è¡¨ç¤ºçš„**ã€‚æ‰€ä»¥ï¼Œ**åœ¨ Java ä¸­ï¼Œchar ç±»å‹å˜é‡å¯ä»¥å­˜å‚¨ä¸€ä¸ªä¸­æ–‡æ±‰å­—ã€‚**

**String s = new String("xyz") ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ**

- é¦–å…ˆï¼Œåœ¨ String æ± å†…æ‰¾ï¼Œæ‰¾åˆ° `"xyz"` å­—ç¬¦ä¸²ï¼Œä¸åˆ›å»º `"xyz"` å¯¹åº”çš„ String å¯¹è±¡ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚
- ç„¶åï¼Œé‡åˆ° `new` å…³é”®å­—ï¼Œåœ¨å†…å­˜ä¸Šåˆ›å»º String å¯¹è±¡ï¼Œå¹¶å°†å…¶è¿”å›ç»™ `s` ï¼Œåˆä¸€ä¸ªå¯¹è±¡ã€‚

æ‰€ä»¥ï¼Œæ€»å…±æ˜¯ 1 ä¸ªæˆ–è€… 2 ä¸ªå¯¹è±¡ã€‚

**String ä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„ï¼Ÿ**

ç®€å•çš„æ¥è¯´ï¼ŒString ç±»ä¸­ä½¿ç”¨ `final` å…³é”®å­—å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// String.java

private final char[] value;
```

- æ‰€ä»¥ String å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚

è€Œ StringBuilder ä¸ StringBuffer éƒ½ç»§æ‰¿è‡ª AbstractStringBuilder ç±»ï¼Œåœ¨ AbstractStringBuilder ä¸­ä¹Ÿæ˜¯ä½¿ç”¨å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸² `char[] value` ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨ `final` å…³é”®å­—ä¿®é¥°ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// AbstractStringBuilder.java

char[] value;
```

- æ‰€ä»¥è¿™ä¸¤ç§å¯¹è±¡éƒ½æ˜¯å¯å˜çš„ã€‚

**String ç±»èƒ½è¢«ç»§æ‰¿å—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ**

ä¸èƒ½ï¼Œå› ä¸º String æ˜¯ `final` ä¿®é¥°ã€‚

## ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ‹†è£…ç®±ï¼Ÿ

è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ï¼Œå°±æ˜¯åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¹‹é—´çš„è½¬æ¢ã€‚

ğŸ¦… **ä¸ºä»€ä¹ˆè¦è½¬æ¢ï¼Ÿ**

å¦‚æœä½ åœ¨ Java5 ä¸‹è¿›è¡Œè¿‡ç¼–ç¨‹çš„è¯ï¼Œä½ ä¸€å®šä¸ä¼šé™Œç”Ÿè¿™ä¸€ç‚¹ï¼Œä½ ä¸èƒ½ç›´æ¥åœ°å‘é›†åˆ( Collection )ä¸­æ”¾å…¥åŸå§‹ç±»å‹å€¼ï¼Œå› ä¸ºé›†åˆåªæ¥æ”¶å¯¹è±¡ã€‚

- é€šå¸¸è¿™ç§æƒ…å†µä¸‹ä½ çš„åšæ³•æ˜¯ï¼Œå°†è¿™äº›åŸå§‹ç±»å‹çš„å€¼è½¬æ¢æˆå¯¹è±¡ï¼Œç„¶åå°†è¿™äº›è½¬æ¢çš„å¯¹è±¡æ”¾å…¥é›†åˆä¸­ã€‚ä½¿ç”¨ Integerã€Doubleã€Boolean ç­‰è¿™äº›ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸå§‹ç±»å‹å€¼è½¬æ¢æˆå¯¹åº”çš„å¯¹è±¡ï¼Œä½†æ˜¯ä»æŸäº›ç¨‹åº¦å¯èƒ½ä½¿å¾—ä»£ç ä¸æ˜¯é‚£ä¹ˆç®€æ´ç²¾ç‚¼ã€‚
- ä¸ºäº†è®©ä»£ç ç®€ç»ƒï¼ŒJava5 å¼•å…¥äº†å…·æœ‰åœ¨åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹è‡ªåŠ¨è½¬æ¢çš„è£…ç®±å’Œæ‹†ç®±æœºåˆ¶ã€‚
- ä½†æ˜¯è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±å¹¶éå®Œç¾ï¼Œåœ¨ä½¿ç”¨æ—¶éœ€è¦æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ï¼Œå¦‚æœæ²¡æœ‰ææ˜ç™½è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ï¼Œå¯èƒ½ä¼šå¼•èµ·éš¾ä»¥å¯Ÿè§‰çš„ Bug ã€‚

ğŸ¦… **int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

- `int` æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚
- Integer æ˜¯å…¶åŒ…è£…ç±»ï¼Œæ³¨æ„æ˜¯ä¸€ä¸ªç±»ã€‚

å½“ç„¶ï¼Œè¦æ³¨æ„ä¸‹ Integer çš„ç¼“å­˜ç­–ç•¥ï¼Œå¯ä»¥çœ‹çœ‹ [ã€Šç†è§£Java Integer çš„ç¼“å­˜ç­–ç•¥ã€‹](http://www.importnew.com/18884.html) æ–‡ç« ã€‚

## equals ä¸ == çš„åŒºåˆ«ï¼Ÿ

- å€¼ç±»å‹ï¼ˆint,char,long,booleanç­‰ï¼‰çš„è¯

  - éƒ½æ˜¯ç”¨ == åˆ¤æ–­ç›¸ç­‰æ€§ã€‚
  
- å¯¹è±¡å¼•ç”¨çš„è¯

  - == åˆ¤æ–­å¼•ç”¨æ‰€æŒ‡çš„å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªã€‚

  - equals æ–¹æ³•ï¼Œæ˜¯ Object çš„æˆå‘˜å‡½æ•°ï¼Œæœ‰äº›ç±»ä¼šè¦†ç›–(`override`) è¿™ä¸ªæ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­å¯¹è±¡çš„ç­‰ä»·æ€§ã€‚

    > ä¾‹å¦‚ String ç±»ï¼Œä¸¤ä¸ªå¼•ç”¨æ‰€æŒ‡å‘çš„ String éƒ½æ˜¯ `"abc"` ï¼Œä½†å¯èƒ½å‡ºç°ä»–ä»¬å®é™…å¯¹åº”çš„å¯¹è±¡å¹¶ä¸æ˜¯åŒä¸€ä¸ªï¼ˆå’Œ JVM å®ç°æ–¹å¼æœ‰å…³ï¼‰ï¼Œå› æ­¤ç”¨ == åˆ¤æ–­ä»–ä»¬å¯èƒ½ä¸ç›¸ç­‰ï¼Œä½†ç”¨ equals æ–¹æ³•åˆ¤æ–­ä¸€å®šæ˜¯ç›¸ç­‰çš„ã€‚

ğŸ¦… **å¦‚ä½•åœ¨çˆ¶ç±»ä¸­ä¸ºå­ç±»è‡ªåŠ¨å®Œæˆæ‰€æœ‰çš„ hashCode å’Œ equals å®ç°ï¼Ÿè¿™ä¹ˆåšæœ‰ä½•ä¼˜åŠ£ï¼Ÿ**

çˆ¶ç±»çš„ equals ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æ— æ³•æ»¡è¶³å­ç±»çš„ equals çš„éœ€æ±‚ã€‚

- æ¯”å¦‚æ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿ Object ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ Object çš„ equals æ–¹æ³•ï¼Œåœ¨æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œæ˜¯çœ‹ä»–ä»¬æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚ä½†æ˜¯æˆ‘ä»¬çš„éœ€æ±‚æ˜¯å¯¹è±¡çš„æŸä¸ªå±æ€§ç›¸åŒï¼Œå°±ç›¸ç­‰äº†ï¼Œè€Œé»˜è®¤çš„ equals æ–¹æ³•æ»¡è¶³ä¸äº†å½“å‰çš„éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é‡å†™ equals æ–¹æ³•ã€‚
- å¦‚æœé‡å†™äº† equals æ–¹æ³•ï¼Œå°±å¿…é¡»é‡å†™ hashCode æ–¹æ³•ï¼Œå¦åˆ™å°±ä¼šé™ä½ Map ç­‰é›†åˆçš„ç´¢å¼•é€Ÿåº¦ã€‚

ğŸ¦… **è¯´ä¸€è¯´ä½ å¯¹ java.lang.Object å¯¹è±¡ä¸­ hashCode å’Œ equals æ–¹æ³•çš„ç†è§£ã€‚åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹éœ€è¦é‡æ–°å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•?**

è¿™ä¸ªé—®é¢˜ï¼Œå’Œä¸Šä¸ª [ã€Œå¦‚ä½•åœ¨çˆ¶ç±»ä¸­ä¸ºå­ç±»è‡ªåŠ¨å®Œæˆæ‰€æœ‰çš„ hashCode å’Œ equals å®ç°ï¼Ÿè¿™ä¹ˆåšæœ‰ä½•ä¼˜åŠ£ï¼Ÿã€](http://svip.iocoder.cn/Java/Core/Interview/#) ä¸€æ ·çš„ç­”æ¡ˆã€‚

ğŸ¦… **è¿™æ ·çš„ a.hashCode() æœ‰ä»€ä¹ˆç”¨ï¼Œä¸ a.equals(b) æœ‰ä»€ä¹ˆå…³ç³»?**

> è¿™ä¸ªé—®é¢˜ï¼Œå’Œä¸Šè¿°é—®é¢˜ï¼Œå°±æ˜¯æ¢ä¸ªå§¿åŠ¿ï¼Œå·®ä¸äº†å¤ªå¤šã€‚

1. equals æ–¹æ³•ï¼Œç”¨äºæ¯”è¾ƒå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚

   > å½“è¦†ç›–äº† equals æ–¹æ³•æ—¶ï¼Œæ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰å°†é€šè¿‡è¦†ç›–åçš„ equals æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼ˆåˆ¤æ–­å¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼‰ã€‚

2. hashCode æ–¹æ³•ï¼Œå¤§å¤šåœ¨é›†åˆä¸­ç”¨åˆ°ã€‚

   > å°†å¯¹è±¡æ”¾å…¥åˆ°é›†åˆä¸­æ—¶ï¼Œé¦–å…ˆåˆ¤æ–­è¦æ”¾å…¥å¯¹è±¡çš„ hashCode å€¼ä¸é›†åˆä¸­çš„ä»»æ„ä¸€ä¸ªå…ƒç´ çš„ hashCode å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰ç›´æ¥å°†è¯¥å¯¹è±¡æ”¾å…¥é›†åˆä¸­ã€‚
   >
   > å¦‚æœ hashCode å€¼ç›¸ç­‰ï¼Œç„¶åå†é€šè¿‡ equals æ–¹æ³•åˆ¤æ–­è¦æ”¾å…¥å¯¹è±¡ä¸é›†åˆä¸­çš„ä»»æ„ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœ equals åˆ¤æ–­ä¸ç›¸ç­‰ï¼Œç›´æ¥å°†è¯¥å…ƒç´ æ”¾å…¥åˆ°é›†åˆä¸­ï¼Œå¦åˆ™ä¸æ”¾å…¥ã€‚

ğŸ¦… **æœ‰æ²¡æœ‰å¯èƒ½ 2 ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„ hashCodeï¼Ÿ**

å¯èƒ½ä¼šå‘ç”Ÿï¼Œè¿™ä¸ªè¢«ç§°ä¸º**å“ˆå¸Œç¢°æ’**ã€‚å½“ç„¶ï¼Œç›¸ç­‰çš„å¯¹è±¡ï¼Œå³æˆ‘ä»¬é‡å†™äº† equals æ–¹æ³•ï¼Œä¸€å®šä¹Ÿè¦é‡å†™ hashCode æ–¹æ³•ï¼Œå¦åˆ™å°†å‡ºç°æˆ‘ä»¬åœ¨ HashMap ä¸­ï¼Œç›¸ç­‰çš„å¯¹è±¡ä½œä¸º key ï¼Œå°†æ‰¾ä¸åˆ°å¯¹åº”çš„ value ã€‚

æ‰€ä»¥è¯´ï¼Œequals å’Œ hashCode çš„å…³ç³»ä¼šæ˜¯ï¼š

- equals ä¸ç›¸ç­‰ï¼ŒhashCode å¯èƒ½ç›¸ç­‰ã€‚
- equals ç›¸ç­‰ï¼Œè¯·é‡å†™ hashCode æ–¹æ³•ï¼Œä¿è¯ hashCode ç›¸ç­‰ã€‚

ä¸€èˆ¬æ¥è¯´ï¼ŒhashCode æ–¹æ³•çš„é‡å†™ï¼Œå¯ä»¥çœ‹çœ‹ [ã€Šç§‘æ™®ï¼šä¸ºä»€ä¹ˆ String hashCode æ–¹æ³•é€‰æ‹©æ•°å­—31ä½œä¸ºä¹˜å­ã€‹](https://segmentfault.com/a/1190000010799123) æ–¹æ³•ã€‚

## finalã€finallyã€finalize çš„åŒºåˆ«ï¼Ÿ

1ï¼‰final

`final` ï¼Œæ˜¯ä¿®é¥°ç¬¦å…³é”®å­—ã€‚

- å¦‚æœä¸€ä¸ªç±»è¢«å£°æ˜ä¸º `final` ï¼Œæ„å‘³ç€å®ƒä¸èƒ½å†æ´¾ç”Ÿå‡ºæ–°çš„å­ç±»ï¼Œä¸èƒ½ä½œä¸ºçˆ¶ç±»è¢«ç»§æ‰¿ã€‚å› æ­¤ä¸€ä¸ªç±»ä¸èƒ½æ—¢è¢«å£°æ˜ä¸º `abstract` çš„ï¼Œåˆè¢«å£°æ˜ä¸º `final` çš„ã€‚
- å°†å˜é‡æˆ–æ–¹æ³•å£°æ˜ä¸º `final` ï¼Œå¯ä»¥ä¿è¯å®ƒä»¬åœ¨ä½¿ç”¨ä¸­ä¸è¢«æ”¹å˜ã€‚è¢«å£°æ˜ä¸º final çš„å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶ç»™å®šåˆå€¼ï¼Œè€Œåœ¨ä»¥åçš„å¼•ç”¨ä¸­åªèƒ½è¯»å–ï¼Œä¸å¯ä¿®æ”¹ã€‚è¢«å£°æ˜ä¸º `final` çš„æ–¹æ³•ä¹ŸåŒæ ·åªèƒ½ä½¿ç”¨ï¼Œä¸èƒ½é‡å†™ã€‚

> å¦å¤–ï¼Œåœ¨æ—©æœŸçš„ Java å®ç°ç‰ˆæœ¬ä¸­ï¼Œä¼šå°† `final` æ–¹æ³•è½¬ä¸ºå†…åµŒè°ƒç”¨ã€‚ä½†æ˜¯å¦‚æœæ–¹æ³•è¿‡äºåºå¤§ï¼Œå¯èƒ½çœ‹ä¸åˆ°å†…åµŒè°ƒç”¨å¸¦æ¥çš„ä»»ä½•æ€§èƒ½æå‡ï¼ˆç°åœ¨çš„ Java ç‰ˆæœ¬å·²ç»ä¸éœ€è¦ä½¿ç”¨ `final` æ–¹æ³•è¿›è¡Œè¿™äº›ä¼˜åŒ–äº†ï¼‰ã€‚ç±»ä¸­æ‰€æœ‰çš„`private` æ–¹æ³•éƒ½éšå¼åœ°æŒ‡å®šä¸º `final` ã€‚

2ï¼‰finally

åœ¨å¼‚å¸¸å¤„ç†æ—¶æä¾› `finally` å—æ¥æ‰§è¡Œä»»ä½•æ¸…é™¤æ“ä½œã€‚å¦‚æœæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£ä¹ˆç›¸åŒ¹é…çš„ `catch` å­å¥å°±ä¼šæ‰§è¡Œï¼Œç„¶åæ§åˆ¶å°±ä¼šè¿›å…¥ `finally` å—ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚

åœ¨ä»¥ä¸‹ 4 ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œfinallyå—ä¸ä¼šè¢«æ‰§è¡Œï¼š

- åœ¨ `finally` è¯­å¥å—ä¸­å‘ç”Ÿäº†å¼‚å¸¸ã€‚
- åœ¨å‰é¢çš„ä»£ç ä¸­ç”¨äº† `System.exit()` é€€å‡ºç¨‹åºã€‚
- ç¨‹åºæ‰€åœ¨çš„çº¿ç¨‹æ­»äº¡ã€‚
- å…³é—­ CPU ã€‚

3ï¼‰finalize

`finalize` ï¼Œæ˜¯æ–¹æ³•åã€‚

Java å…è®¸ä½¿ç”¨ `#finalize()` æ–¹æ³•ï¼Œåœ¨åƒåœ¾æ”¶é›†å™¨å°†å¯¹è±¡ä»å†…å­˜ä¸­æ¸…é™¤å‡ºå»ä¹‹å‰åšå¿…è¦çš„æ¸…ç†å·¥ä½œã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç”±åƒåœ¾æ”¶é›†å™¨åœ¨ç¡®å®šè¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨æ—¶å¯¹è¿™ä¸ªå¯¹è±¡è°ƒç”¨çš„ã€‚

- å®ƒæ˜¯åœ¨ Object ç±»ä¸­å®šä¹‰çš„ï¼Œå› æ­¤æ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿äº†å®ƒã€‚
- å­ç±»è¦†ç›– `finalize()` æ–¹æ³•ï¼Œä»¥æ•´ç†ç³»ç»Ÿèµ„æºæˆ–è€…æ‰§è¡Œå…¶ä»–æ¸…ç†å·¥ä½œã€‚
- `#finalize()` æ–¹æ³•ï¼Œ**æ˜¯åœ¨åƒåœ¾æ”¶é›†å™¨åˆ é™¤å¯¹è±¡ä¹‹å‰å¯¹è¿™ä¸ªå¯¹è±¡è°ƒç”¨çš„ã€‚**

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡ä¸­ä¸ä¼šè‡ªå·±å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œæ›´å¤šæ˜¯åœ¨ä¸€äº›æ¡†æ¶ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ [ã€ŠNetty Using finalize() to release ByteBufsã€‹](https://github.com/netty/netty/issues/4145) ã€‚

## æŠ½è±¡ç±»å’Œæ¥å£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

ä»è®¾è®¡å±‚é¢æ¥è¯´ï¼ŒæŠ½è±¡æ˜¯å¯¹ç±»çš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§æ¨¡æ¿è®¾è®¡ï¼Œæ¥å£æ˜¯è¡Œä¸ºçš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§è¡Œä¸ºçš„è§„èŒƒã€‚

- Java æä¾›å’Œæ”¯æŒåˆ›å»ºæŠ½è±¡ç±»å’Œæ¥å£ã€‚å®ƒä»¬çš„å®ç°æœ‰å…±åŒç‚¹ï¼Œä¸åŒç‚¹åœ¨äºï¼šæ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•éšå«çš„éƒ½æ˜¯æŠ½è±¡çš„ï¼Œè€ŒæŠ½è±¡ç±»åˆ™å¯ä»¥åŒæ—¶åŒ…å«æŠ½è±¡å’ŒéæŠ½è±¡çš„æ–¹æ³•ã€‚
- ç±»å¯ä»¥å®ç°å¾ˆå¤šä¸ªæ¥å£ï¼Œä½†æ˜¯åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ç±»å¯ä»¥ä¸å®ç°æŠ½è±¡ç±»å’Œæ¥å£å£°æ˜çš„æ‰€æœ‰æ–¹æ³•ï¼Œå½“ç„¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»ä¹Ÿå¿…é¡»å¾—å£°æ˜æˆæ˜¯æŠ½è±¡çš„ã€‚
- æŠ½è±¡ç±»å¯ä»¥åœ¨ä¸æä¾›æ¥å£æ–¹æ³•å®ç°çš„æƒ…å†µä¸‹å®ç°æ¥å£ã€‚
- Java æ¥å£ä¸­å£°æ˜çš„å˜é‡é»˜è®¤éƒ½æ˜¯ `final` çš„ã€‚æŠ½è±¡ç±»å¯ä»¥åŒ…å«é `final` çš„å˜é‡ã€‚
- Java æ¥å£ä¸­çš„æˆå‘˜å‡½æ•°é»˜è®¤æ˜¯ `public` çš„ã€‚æŠ½è±¡ç±»çš„æˆå‘˜å‡½æ•°å¯ä»¥æ˜¯ `private`ï¼Œ`protected` æˆ–è€…æ˜¯ `public` ã€‚
- æ¥å£æ˜¯ç»å¯¹æŠ½è±¡çš„ï¼Œä¸å¯ä»¥è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»ä¹Ÿä¸å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯ï¼Œå¦‚æœå®ƒåŒ…å« `#main(String[] args)` æ–¹æ³•çš„è¯æ˜¯å¯ä»¥è¢«è°ƒç”¨çš„ã€‚

ç»§æ‰¿å’Œç»„åˆçš„åŒºåˆ«åœ¨å“ªï¼Ÿ

- ç»§æ‰¿ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºå­ç±»ã€å­æ¥å£ï¼‰ç»§æ‰¿å¦å¤–çš„ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºçˆ¶ç±»ã€çˆ¶æ¥å£ï¼‰çš„åŠŸèƒ½ï¼Œå¹¶å¯ä»¥å¢åŠ å®ƒè‡ªå·±çš„æ–°åŠŸèƒ½çš„èƒ½åŠ›ï¼Œ**ç»§æ‰¿æ˜¯ç±»ä¸ç±»æˆ–è€…æ¥å£ä¸æ¥å£ä¹‹é—´æœ€å¸¸è§çš„å…³ç³»ã€‚åœ¨ Java ä¸­ï¼Œæ­¤ç±»å…³ç³»é€šè¿‡å…³é”®å­— `extends` æ˜ç¡®æ ‡è¯†**ï¼Œåœ¨è®¾è®¡æ—¶ä¸€èˆ¬æ²¡æœ‰äº‰è®®æ€§ã€‚
- ç»„åˆï¼šç»„åˆæ˜¯å…³è”å…³ç³»çš„ä¸€ç§ç‰¹ä¾‹ï¼Œä»–ä½“ç°çš„æ˜¯æ•´ä½“ä¸éƒ¨åˆ†ã€æ‹¥æœ‰çš„å…³ç³»ï¼Œå³ has-a çš„å…³ç³»ï¼Œ**æ­¤æ—¶æ•´ä½“ä¸éƒ¨åˆ†ä¹‹é—´æ˜¯å¯åˆ†ç¦»çš„ï¼Œä»–ä»¬å¯ä»¥å…·æœ‰å„è‡ªçš„ç”Ÿå‘½å‘¨æœŸ**ï¼Œéƒ¨åˆ†å¯ä»¥å±äºå¤šä¸ªæ•´ä½“å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä¸ºå¤šä¸ªæ•´ä½“å¯¹è±¡å…±äº«ã€‚
  - æ¯”å¦‚ï¼Œè®¡ç®—æœºä¸ CPU ã€å…¬å¸ä¸å‘˜å·¥çš„å…³ç³»ç­‰ã€‚
  - è¡¨ç°åœ¨ä»£ç å±‚é¢ï¼Œå’Œå…³è”å…³ç³»æ˜¯ä¸€è‡´çš„ï¼Œåªèƒ½ä»è¯­ä¹‰çº§åˆ«æ¥åŒºåˆ†ã€‚

å› ä¸ºç»„åˆèƒ½å¸¦æ¥æ¯”ç»§æ‰¿æ›´å¥½çš„çµæ´»æ€§ï¼Œæ‰€ä»¥æœ‰å¥è¯å«åšâ€œç»„åˆä¼˜äºç»§æ‰¿â€ã€‚æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹ [ã€Šæ€æ ·ç†è§£â€œç»„åˆä¼˜äºç»§æ‰¿â€ä»¥åŠâ€œOOçš„åæ¨¡å—åŒ–â€ï¼Œåœ¨è¿™äº›æ–¹é¢FPå…·ä½“æ¥è¯´æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿã€‹](https://www.zhihu.com/question/21862257) æ–‡ç« ã€‚

è¯·è¯¦ç»†è®²è¿°ä¸€ä¸‹ RandomAccess æ¥å£æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ

RandomAccess ç”¨æ¥å½“æ ‡è®°çš„ï¼Œæ˜¯ä¸€ç§æ ‡è®°æ¥å£ï¼Œæ¥å£çš„éå…¸å‹ç”¨æ³•ã€‚æ„æ€æ˜¯ï¼Œéšæœºè®¿é—®ä»»æ„ä¸‹æ ‡å…ƒç´ éƒ½æ¯”è¾ƒå¿«ã€‚

ç”¨å¤„ï¼Œå½“è¦å®ç°æŸäº›ç®—æ³•æ—¶ï¼Œä¼šåˆ¤æ–­å½“å‰ç±»æ˜¯å¦å®ç°äº† RandomAccess æ¥å£ï¼Œä¼šæ ¹æ®ç»“æœé€‰æ‹©ä¸åŒçš„ç®—æ³•ã€‚

## è®²è®²ç±»çš„å®ä¾‹åŒ–é¡ºåºï¼Ÿ

åˆå§‹åŒ–é¡ºåºå¦‚ä¸‹ï¼š

- çˆ¶ç±»é™æ€å˜é‡
- çˆ¶ç±»é™æ€ä»£ç å—
- å­ç±»é™æ€å˜é‡ã€
- å­ç±»é™æ€ä»£ç å—
- çˆ¶ç±»éé™æ€å˜é‡ï¼ˆçˆ¶ç±»å®ä¾‹æˆå‘˜å˜é‡ï¼‰
- çˆ¶ç±»æ„é€ å‡½æ•°
- å­ç±»éé™æ€å˜é‡ï¼ˆå­ç±»å®ä¾‹æˆå‘˜å˜é‡ï¼‰
- å­ç±»æ„é€ å‡½æ•°

## ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ

ç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªç±»ã€æ¥å£æˆ–è€…æ–¹æ³•çš„å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªç±»ã€‚è¿™æ ·ç†è§£çš„è¯ï¼Œåˆ›å»ºå†…éƒ¨ç±»çš„æ–¹æ³•å°±å¾ˆæ˜ç¡®äº†ã€‚å½“ç„¶ï¼Œè¯¦ç»†çš„å¯ä»¥çœ‹çœ‹ [ã€ŠJava å†…éƒ¨ç±»æ€»ç»“ï¼ˆåè¡€ä¹‹ä½œï¼‰ã€‹](https://blog.csdn.net/hikvision_java_gyh/article/details/8964155) æ–‡ç« ã€‚

ğŸ¦… **å†…éƒ¨ç±»çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**

å†…éƒ¨ç±»æä¾›äº†æ›´å¥½çš„å°è£…ï¼Œé™¤äº†è¯¥å¤–å›´ç±»ï¼Œå…¶ä»–ç±»éƒ½ä¸èƒ½è®¿é—®ã€‚

ğŸ¦… **Anonymous Inner Class(åŒ¿åå†…éƒ¨ç±»)æ˜¯å¦å¯ä»¥ç»§æ‰¿å…¶å®ƒç±»ï¼Ÿæ˜¯å¦å¯ä»¥å®ç°æ¥å£ï¼Ÿ**

å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»æˆ–å®ç°å…¶ä»–æ¥å£ï¼Œåœ¨ Java é›†åˆçš„æµå¼æ“ä½œä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸è¿™ä¹ˆå¹²ã€‚

ğŸ¦… **å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å®ƒçš„åŒ…å«ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰çš„æˆå‘˜å—ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ**

ä¸€ä¸ªå†…éƒ¨ç±»å¯¹è±¡å¯ä»¥è®¿é—®åˆ›å»ºå®ƒçš„å¤–éƒ¨ç±»å¯¹è±¡çš„æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰æˆå‘˜ã€‚

## ä»€ä¹ˆæ˜¯ Java åºåˆ—åŒ–ï¼Ÿ

åºåˆ—åŒ–å°±æ˜¯ä¸€ç§ç”¨æ¥å¤„ç†å¯¹è±¡æµçš„æœºåˆ¶ï¼Œæ‰€è°“å¯¹è±¡æµä¹Ÿå°±æ˜¯å°†å¯¹è±¡çš„å†…å®¹è¿›è¡ŒæµåŒ–ã€‚

- å¯ä»¥å¯¹æµåŒ–åçš„å¯¹è±¡è¿›è¡Œè¯»å†™æ“ä½œï¼Œä¹Ÿå¯å°†æµåŒ–åçš„å¯¹è±¡ä¼ è¾“äºç½‘ç»œä¹‹é—´ã€‚
- åºåˆ—åŒ–æ˜¯ä¸ºäº†è§£å†³åœ¨å¯¹å¯¹è±¡æµè¿›è¡Œè¯»å†™æ“ä½œæ—¶æ‰€å¼•å‘çš„é—®é¢˜ã€‚

ååºåˆ—åŒ–çš„è¿‡ç¨‹ï¼Œåˆ™æ˜¯å’Œåºåˆ—åŒ–ç›¸åçš„è¿‡ç¨‹ã€‚

> å¦å¤–ï¼Œæˆ‘ä»¬ä¸èƒ½å°†åºåˆ—åŒ–å±€é™åœ¨ Java å¯¹è±¡è½¬æ¢æˆäºŒè¿›åˆ¶æ•°ç»„ï¼Œä¾‹å¦‚è¯´ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ª Java å¯¹è±¡ï¼Œè½¬æ¢æˆ JSON å­—ç¬¦ä¸²ï¼Œæˆ–è€… XML å­—ç¬¦ä¸²ï¼Œè¿™ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯åºåˆ—åŒ–ã€‚

ğŸ¦… **å¦‚ä½•å®ç° Java åºåˆ—åŒ–ï¼Ÿ**

> å¦‚ä¸‹çš„æ–¹å¼ï¼Œå°±æ˜¯ Java å†…ç½®çš„åºåˆ—åŒ–æ–¹æ¡ˆï¼Œå®é™…åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰åºåˆ—åŒ–çš„æ–¹æ¡ˆï¼Œä¾‹å¦‚è¯´ Google Protobuf ã€‚

å°†éœ€è¦è¢«åºåˆ—åŒ–çš„ç±»ï¼Œå®ç° Serializable æ¥å£ï¼Œè¯¥æ¥å£æ²¡æœ‰éœ€è¦å®ç°çš„æ–¹æ³•ï¼Œ`implements Serializable` åªæ˜¯ä¸ºäº†æ ‡æ³¨è¯¥å¯¹è±¡æ˜¯å¯è¢«åºåˆ—åŒ–çš„ã€‚

- åºåˆ—åŒ–
  - ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªè¾“å‡ºæµ(å¦‚ï¼šFileOutputStream)æ¥æ„é€ ä¸€ä¸ª ObjectOutputStream(å¯¹è±¡æµ)å¯¹è±¡
  - æ¥ç€ï¼Œä½¿ç”¨ ObjectOutputStream å¯¹è±¡çš„ `#writeObject(Object obj)` æ–¹æ³•ï¼Œå°±å¯ä»¥å°†å‚æ•°ä¸º `obj` çš„å¯¹è±¡å†™å‡º(å³ä¿å­˜å…¶çŠ¶æ€)ã€‚
- ååºåˆ—åŒ–
  - è¦æ¢å¤çš„è¯åˆ™ç”¨è¾“å…¥æµã€‚

ğŸ¦… **Java åºåˆ—è¯ä¸­ï¼Œå¦‚æœæœ‰äº›å­—æ®µä¸æƒ³è¿›è¡Œåºåˆ—åŒ–æ€ä¹ˆåŠï¼Ÿ**

å¯¹äºä¸æƒ³è¿›è¡Œåºåˆ—åŒ–çš„å˜é‡ï¼Œä½¿ç”¨ `transient` å…³é”®å­—ä¿®é¥°ã€‚

- å½“å¯¹è±¡è¢«åºåˆ—åŒ–æ—¶ï¼Œé˜»æ­¢å®ä¾‹ä¸­é‚£äº›ç”¨æ­¤å…³é”®å­—ä¿®é¥°çš„çš„å˜é‡åºåˆ—åŒ–ã€‚
- å½“å¯¹è±¡è¢«ååºåˆ—åŒ–æ—¶ï¼Œè¢« `transient` ä¿®é¥°çš„å˜é‡å€¼ä¸ä¼šè¢«æŒä¹…åŒ–å’Œæ¢å¤ã€‚
- `transient` åªèƒ½ä¿®é¥°å˜é‡ï¼Œä¸èƒ½ä¿®é¥°ç±»å’Œæ–¹æ³•ã€‚

## å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ

ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š

- 1ã€å®ç° Cloneable æ¥å£ï¼Œå¹¶é‡å†™ Object ç±»ä¸­çš„ `#clone()` æ–¹æ³•ã€‚å¯ä»¥å®ç°**æµ…å…‹éš†**ï¼Œä¹Ÿå¯ä»¥å®ç°**æ·±å…‹éš†**ã€‚
- 2ã€å®ç° Serializable æ¥å£ï¼Œé€šè¿‡å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°å…‹éš†ã€‚å¯ä»¥å®ç°çœŸæ­£çš„**æ·±å…‹éš†**ã€‚

> è‰¿è‰¿ï¼šè¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿå¯ä»¥å˜ç§æ¥é—®ï¼Œä»€ä¹ˆæ˜¯**æµ…å…‹éš†**å’Œ**æ·±å…‹éš†**ã€‚

å…·ä½“çš„ä»£ç å®ç°ï¼Œå¯ä»¥çœ‹çœ‹ [ã€ŠJava å¯¹è±¡çš„æµ…å…‹éš†å’Œæ·±å…‹éš†ã€‹](https://blog.csdn.net/caomiao2006/article/details/52590622) æ–‡ç« ã€‚

å®é™…åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å…‹éš†æ¯”è¾ƒå°‘ï¼Œæ›´å¤šæ˜¯å¯¹è±¡ä¹‹é—´çš„å±æ€§å…‹éš†ã€‚ä¾‹å¦‚è¯´ï¼Œå°† DO çš„å±æ€§å¤åˆ¶åˆ° DTO ä¸­ï¼Œåˆæˆ–è€…å°† DTO çš„å±æ€§å¤åˆ¶åˆ° VO ä¸­ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ BeanUtils å·¥å…·ç±»ã€‚å…·ä½“çš„ä½¿ç”¨ï¼Œçœ‹çœ‹ [ã€Šæµ…è°ˆ BeanUtils çš„æ‹·è´ï¼Œæ·±åº¦å…‹éš†ã€‹](https://www.cnblogs.com/tison/p/7840647.html) æ–‡ç« ã€‚

## error å’Œ exception æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸCheckedException å’Œ RuntimeException æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

Java çš„å¼‚å¸¸ä½“ç³»ï¼ŒåŸºäºå…±åŒçš„ç¥–å…ˆ `java.lang.Throwable` ç±»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Throwable ç±»å›¾](assets/3b7fc781e8c5f9b354fbab05639dbcca.png)

> æ„Ÿè°¢ã€è´¾é¹¤é¸£ã€‘èƒ–å‹æŒ‡å‡ºçš„é—®é¢˜ã€‚å›¾æœ‰ç‚¹é—®é¢˜ï¼š
>
> 1. å›¾ä¸­çš„ ArrithmeticException å¼‚å¸¸ï¼Œå¤šäº†ä¸€ä¸ª r ï¼Œæ­£ç¡®æ‹¼å†™æ˜¯ ArithmeticException ã€‚
> 2. å›¾ä¸­ ClassNotFoundException å¼‚å¸¸ï¼Œçˆ¶ç±»æ˜¯ `ReflectiveOperationException => Exception` ï¼Œä¸å±äº RunTimeException ã€‚

- Errorï¼ˆé”™è¯¯ï¼‰ï¼Œè¡¨ç¤ºç³»ç»Ÿçº§çš„é”™è¯¯å’Œç¨‹åºä¸å¿…å¤„ç†çš„å¼‚å¸¸ï¼Œæ˜¯ Java è¿è¡Œç¯å¢ƒä¸­çš„å†…éƒ¨é”™è¯¯æˆ–è€…ç¡¬ä»¶é—®é¢˜ã€‚
  - ä¾‹å¦‚ï¼šå†…å­˜èµ„æºä¸è¶³ç­‰ã€‚
  - å¯¹äºè¿™ç§é”™è¯¯ï¼Œç¨‹åºåŸºæœ¬æ— èƒ½ä¸ºåŠ›ï¼Œé™¤äº†é€€å‡ºè¿è¡Œå¤–åˆ«æ— é€‰æ‹©ï¼Œå®ƒæ˜¯ç”± Java è™šæ‹ŸæœºæŠ›å‡ºçš„ã€‚
- Exceptionï¼ˆå¼‚å¸¸ï¼‰ï¼Œè¡¨ç¤ºéœ€è¦æ•æ‰æˆ–è€…éœ€è¦ç¨‹åºè¿›è¡Œå¤„ç†çš„å¼‚å¸¸ï¼Œå®ƒå¤„ç†çš„æ˜¯å› ä¸ºç¨‹åºè®¾è®¡çš„ç‘•ç–µè€Œå¼•èµ·çš„é—®é¢˜æˆ–è€…åœ¨å¤–çš„è¾“å…¥ç­‰å¼•èµ·çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œæ˜¯ç¨‹åºå¿…é¡»å¤„ç†çš„ã€‚Exception åˆåˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå—æ£€æŸ¥å¼‚å¸¸ã€‚
  - RuntimeException(è¿è¡Œæ—¶å¼‚å¸¸)ï¼Œè¡¨ç¤ºæ— æ³•è®©ç¨‹åºæ¢å¤çš„å¼‚å¸¸ï¼Œå¯¼è‡´çš„åŸå› é€šå¸¸æ˜¯å› ä¸ºæ‰§è¡Œäº†é”™è¯¯çš„æ“ä½œï¼Œå»ºè®®ç»ˆæ­¢é€»è¾‘ï¼Œå› æ­¤ï¼Œç¼–è¯‘å™¨ä¸æ£€æŸ¥è¿™äº›å¼‚å¸¸ã€‚
  - CheckedException(å—æ£€æŸ¥å¼‚å¸¸)ï¼Œæ˜¯è¡¨ç¤ºç¨‹åºå¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œä¹Ÿå³è¡¨ç¤ºç¨‹åºå¯ä»¥ä¿®å¤ï¼ˆç”±ç¨‹åºè‡ªå·±æ¥å—å¼‚å¸¸å¹¶ä¸”åšå‡ºå¤„ç†ï¼‰ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºå—æ£€æŸ¥å¼‚å¸¸ã€‚

**å¼‚å¸¸çš„ä½¿ç”¨çš„æ³¨æ„åœ°æ–¹ï¼Ÿ**

ç¥ä½œã€ŠEffective Javaã€‹ä¸­å¯¹å¼‚å¸¸çš„ä½¿ç”¨ç»™å‡ºäº†ä»¥ä¸‹æŒ‡å¯¼åŸåˆ™ï¼š

> è‰¿è‰¿ï¼šè¯¥ä¹¦ï¼Œååˆ†æ¨èå»é˜…è¯»ã€‚

- ä¸è¦å°†å¼‚å¸¸å¤„ç†ç”¨äºæ­£å¸¸çš„æ§åˆ¶æµï¼ˆè®¾è®¡è‰¯å¥½çš„ API ä¸åº”è¯¥å¼ºè¿«å®ƒçš„è°ƒç”¨è€…ä¸ºäº†æ­£å¸¸çš„æ§åˆ¶æµè€Œä½¿ç”¨å¼‚å¸¸ï¼‰ã€‚
- å¯¹å¯ä»¥æ¢å¤çš„æƒ…å†µä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¯¹ç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸ã€‚
- é¿å…ä¸å¿…è¦çš„ä½¿ç”¨å—æ£€å¼‚å¸¸ï¼ˆå¯ä»¥é€šè¿‡ä¸€äº›çŠ¶æ€æ£€æµ‹æ‰‹æ®µæ¥é¿å…å¼‚å¸¸çš„å‘ç”Ÿï¼‰ã€‚
- ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸ã€‚
- æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦æœ‰æ–‡æ¡£ã€‚
- ä¿æŒå¼‚å¸¸çš„åŸå­æ€§
- ä¸è¦åœ¨ `catch` ä¸­å¿½ç•¥æ‰æ•è·åˆ°çš„å¼‚å¸¸ã€‚

ğŸ¦… **Throwable ç±»å¸¸ç”¨æ–¹æ³•ï¼Ÿ**

- `#getMessage()` æ–¹æ³•ï¼šè¿”å›å¼‚å¸¸å‘ç”Ÿæ—¶çš„è¯¦ç»†ä¿¡æ¯ã€‚

- `#getCause()` æ–¹æ³•ï¼šè·å¾—å¯¼è‡´å½“å‰ Throwable å¼‚å¸¸çš„ Throwable å¼‚å¸¸ã€‚

- ```
  #getStackTrace()
  ```

   

  æ–¹æ³•ï¼šè·å¾— Throwable å¯¹è±¡å°è£…çš„å¼‚å¸¸ä¿¡æ¯ã€‚

  - `#printStackTrace()` æ–¹æ³•ï¼šåœ¨æ§åˆ¶å°ä¸Šæ‰“å°ã€‚

ğŸ¦… **è¯·åˆ—å‡º 5 ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ï¼Ÿ**

- NullPointerException
- IndexOutOfBoundsException
- ClassCastException
- ArrayStoreException
- BufferOverflowException

ğŸ¦… **throw ä¸ throws çš„åŒºåˆ« ï¼Ÿ**

- `throw` ï¼Œç”¨äºåœ¨ç¨‹åºä¸­æ˜¾å¼åœ°æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚
- `throws` ï¼Œç”¨äºæŒ‡å‡ºåœ¨è¯¥æ–¹æ³•ä¸­æ²¡æœ‰å¤„ç†çš„å¼‚å¸¸ã€‚**æ¯ä¸ªæ–¹æ³•å¿…é¡»æ˜¾å¼æŒ‡æ˜å“ªäº›å¼‚å¸¸æ²¡æœ‰å¤„ç†ï¼Œä»¥ä¾¿è¯¥æ–¹æ³•çš„è°ƒç”¨è€…å¯ä»¥é¢„é˜²å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸**ã€‚æœ€åï¼Œå¤šä¸ªå¼‚å¸¸ç”¨é€—å·åˆ†éš”ã€‚

ğŸ¦… **å¼‚å¸¸å¤„ç†ä¸­ finally è¯­å¥å—çš„é‡è¦æ€§?**

ä¸ç®¡ç¨‹åºæ˜¯å¦å‘ç”Ÿäº†å¼‚å¸¸, `finally` è¯­å¥å—éƒ½ä¼šè¢«æ‰§è¡Œï¼Œç”šè‡³å½“æ²¡æœ‰`catch` å£°æ˜ä½†æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸æ—¶, `finally` è¯­å¥å—ä¹Ÿä¼šè¢«æ‰§è¡Œã€‚

`finally` è¯­å¥å—é€šå¸¸ç”¨äºé‡Šæ”¾èµ„æº, å¦‚ I/O ç¼“å†²åŒº, æ•°æ®åº“è¿æ¥ç­‰ç­‰ã€‚

ğŸ¦… **å¼‚å¸¸è¢«å¤„ç†åå¼‚å¸¸å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆ?**

> è‰¿è‰¿ï¼šè¿™ä¸ªé—®é¢˜æœ‰ç‚¹å¥‡æ€ªï¼Œä»ç½‘ä¸Šæ‰¾æ¥çš„â€¦

å¼‚å¸¸å¯¹è±¡ä¼šåœ¨ä¸‹æ¬¡ GC æ‰§è¡Œæ—¶è¢«å›æ”¶ã€‚

ğŸ¦… **UnsupportedOperationException æ˜¯ä»€ä¹ˆï¼Ÿ**

UnsupportedOperationException ï¼Œæ˜¯ç”¨äºè¡¨æ˜æ“ä½œä¸æ”¯æŒçš„å¼‚å¸¸ã€‚

åœ¨ JDK ç±»ä¸­å·²è¢«å¤§é‡è¿ç”¨ï¼Œåœ¨é›†åˆæ¡†æ¶`java.util.Collections.UnmodifiableCollection` å°†ä¼šåœ¨æ‰€æœ‰ add å’Œ remove æ“ä½œä¸­æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚

## è¯´è¯´åå°„çš„ç”¨é€”åŠå®ç°ï¼Ÿ

Java åå°„æœºåˆ¶ä¸»è¦æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

- åœ¨è¿è¡Œæ—¶æ„é€ ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚
- åˆ¤æ–­ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚
- è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚
- ç”ŸæˆåŠ¨æ€ä»£ç†ã€‚

åå°„çš„åº”ç”¨å¾ˆå¤šï¼Œå¾ˆå¤šæ¡†æ¶éƒ½æœ‰ç”¨åˆ°ï¼š

- Spring æ¡†æ¶çš„ IoC åŸºäºåå°„åˆ›å»ºå¯¹è±¡å’Œè®¾ç½®ä¾èµ–å±æ€§ã€‚
- Spring MVC çš„è¯·æ±‚è°ƒç”¨å¯¹åº”æ–¹æ³•ï¼Œä¹Ÿæ˜¯é€šè¿‡åå°„ã€‚
- JDBC çš„ `Class#forName(String className)` æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä½¿ç”¨åå°„ã€‚

ä¸äº†è§£ Java åå°„çš„åŒå­¦ï¼Œå¯ä»¥çœ‹çœ‹ [ã€Šä»€ä¹ˆæ˜¯åå°„ã€åå°„å¯ä»¥åšäº›ä»€ä¹ˆã€‹](http://www.cnblogs.com/zhaopei/p/reflection.html) ã€‚

> å¯¹äºå¤§å¤šæ•° Java èŒæ–°ï¼ŒåŒ…æ‹¬è‰¿è‰¿åœ¨å†…ã€‚ä¸è¿‡åæ¥å‘ç°ï¼Œå†éš¾çš„ Java çŸ¥è¯†ï¼Œæœªæ¥éƒ½éœ€è¦å˜æˆæˆ‘ä»¬çš„åŸºç¡€çŸ¥è¯†ï¼Œå˜»å˜»ã€‚

ğŸ¦… **åå°„ä¸­ï¼ŒClass.forName å’Œ ClassLoader åŒºåˆ«ï¼Ÿ**

è¿™ä¸¤è€…ï¼Œéƒ½å¯ç”¨æ¥å¯¹ç±»è¿›è¡ŒåŠ è½½ã€‚å·®åˆ«åœ¨äºï¼š

- `Class#forName(...)` æ–¹æ³•ï¼Œé™¤äº†å°†ç±»çš„ `.class` æ–‡ä»¶åŠ è½½åˆ°JVM ä¸­ä¹‹å¤–ï¼Œè¿˜ä¼šå¯¹ç±»è¿›è¡Œè§£é‡Šï¼Œæ‰§è¡Œç±»ä¸­çš„ `static` å—ã€‚

- ClassLoader åªå¹²ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯å°† `.class` æ–‡ä»¶åŠ è½½åˆ° JVM ä¸­ï¼Œä¸ä¼šæ‰§è¡Œ `static` ä¸­çš„å†…å®¹ï¼Œåªæœ‰åœ¨ newInstance æ‰ä¼šå»æ‰§è¡Œ `static` å—ã€‚

  > `Class#forName(name, initialize, loader)` æ–¹æ³•ï¼Œå¸¦å‚å‡½æ•°ä¹Ÿå¯æ§åˆ¶æ˜¯å¦åŠ è½½ `static` å—ï¼Œå¹¶ä¸”åªæœ‰è°ƒç”¨äº†newInstance æ–¹æ³•é‡‡ç”¨è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ›å»ºç±»çš„å¯¹è±¡ã€‚

è¯¦ç»†çš„æµ‹è¯•ï¼Œå¯ä»¥çœ‹çœ‹ [ã€ŠJava åå°„ä¸­ï¼ŒClass.forName å’ŒClassLoader çš„åŒºåˆ«(ä»£ç è¯´è¯)ã€‹](https://blog.csdn.net/qq_27093465/article/details/52262340) æ–‡ç« ã€‚

## ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ

ç›´æ¥çœ‹ [ã€Šæ·±å…¥æµ…å‡º Java æ³¨è§£ã€‹](https://www.jianshu.com/p/5cac4cb9be54) ã€‚

å¦‚æœèƒ–å‹æ²¡æœ‰è‡ªå·±å®ç°è‡ªå®šä¹‰çš„æ³¨è§£ï¼Œåƒä¸‡ä¸€å®šé©¬ä¸Šå»å°è¯•å†™ä¸‹ã€‚é…±ç´«ï¼Œæˆ‘ä»¬ä¼šå¯¹æ³¨è§£ï¼Œæœ‰æ›´å¥½ä¸”æ¸…æ™°çš„è®¤è¯†ã€‚

## ä»€ä¹ˆæ—¶å€™ç”¨æ–­è¨€ï¼ˆ`assert`ï¼‰ï¼Ÿ

æ–­è¨€ï¼Œåœ¨è½¯ä»¶å¼€å‘ä¸­æ˜¯ä¸€ç§å¸¸ç”¨çš„è°ƒè¯•æ–¹å¼ï¼Œå¾ˆå¤šå¼€å‘è¯­è¨€ä¸­éƒ½æ”¯æŒè¿™ç§æœºåˆ¶ã€‚

- ä¸€èˆ¬æ¥è¯´ï¼Œ**æ–­è¨€ç”¨äºä¿è¯ç¨‹åºæœ€åŸºæœ¬ã€å…³é”®çš„æ­£ç¡®æ€§ã€‚**æ–­è¨€æ£€æŸ¥é€šå¸¸åœ¨å¼€å‘å’Œæµ‹è¯•æ—¶å¼€å¯ã€‚ä¸ºäº†ä¿è¯ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œåœ¨è½¯ä»¶å‘å¸ƒåæ–­è¨€æ£€æŸ¥é€šå¸¸æ˜¯å…³é—­çš„ã€‚

- æ–­è¨€æ˜¯ä¸€ä¸ªåŒ…å«å¸ƒå°”è¡¨è¾¾å¼çš„è¯­å¥ï¼Œåœ¨æ‰§è¡Œè¿™ä¸ªè¯­å¥æ—¶å‡å®šè¯¥è¡¨è¾¾å¼ä¸º`true`ï¼›å¦‚æœè¡¨è¾¾å¼çš„å€¼ä¸º `false` ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šæŠ¥å‘Šä¸€ä¸ªAssertionError é”™è¯¯ã€‚æ–­è¨€çš„ä½¿ç”¨å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š

  ```
  assert(a > 0); // throws an AssertionError if a <= 0
  ```

  - æ–­è¨€å¯ä»¥æœ‰ä¸¤ç§å½¢å¼ï¼š
    - `assert Expression1;` ã€‚
    - `assert Expression1 : Expression2;` ã€‚
    - Expression1 åº”è¯¥æ€»æ˜¯äº§ç”Ÿä¸€ä¸ªå¸ƒå°”å€¼ã€‚
    - Expression2 å¯ä»¥æ˜¯å¾—å‡ºä¸€ä¸ªå€¼çš„ä»»æ„è¡¨è¾¾å¼ï¼›è¿™ä¸ªå€¼ç”¨äºç”Ÿæˆæ˜¾ç¤ºæ›´å¤šè°ƒè¯•ä¿¡æ¯çš„å­—ç¬¦ä¸²æ¶ˆæ¯ã€‚

- è¦åœ¨è¿è¡Œæ—¶å¯ç”¨æ–­è¨€ï¼Œå¯ä»¥åœ¨å¯åŠ¨ JVM æ—¶ä½¿ç”¨ `-enableassertions` æˆ–è€… `-ea` æ ‡è®°ã€‚è¦åœ¨è¿è¡Œæ—¶é€‰æ‹©ç¦ç”¨æ–­è¨€ï¼Œå¯ä»¥åœ¨å¯åŠ¨ JVM æ—¶ä½¿ç”¨ `-da` æˆ–è€… `-disableassertions` æ ‡è®°ã€‚è¦åœ¨ç³»ç»Ÿç±»ä¸­å¯ç”¨æˆ–ç¦ç”¨æ–­è¨€ï¼Œå¯ä½¿ç”¨ `-esa` æˆ– `-dsa` æ ‡è®°ã€‚è¿˜å¯ä»¥åœ¨åŒ…çš„åŸºç¡€ä¸Šå¯ç”¨æˆ–è€…ç¦ç”¨æ–­è¨€ã€‚

å½“ç„¶ï¼Œå®é™…åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¼šåœ¨ Spring çš„æºç ä¸­çœ‹åˆ°ï¼Œå®ƒè‡ªå·±å°è£…äº† Assert ç±»ï¼Œå®ç°æ›´æ–¹ä¾¿çš„æ–­è¨€åŠŸèƒ½ï¼Œå¹¶ä¸”ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¹Ÿå¯ç”¨ã€‚

å¦å¤–ï¼Œåœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œä¹Ÿä¼šä½¿ç”¨è‡ªå·±å°è£…çš„æ–­è¨€ç±»ï¼Œåˆ¤æ–­æ‰§è¡Œç»“æœçš„æ­£ç¡®ä¸é”™è¯¯ã€‚

## Java å¯¹è±¡åˆ›å»ºçš„æ–¹å¼ï¼Ÿ

1. ä½¿ç”¨ `new` å…³é”®å­—åˆ›å»ºå¯¹è±¡ã€‚
2. ä½¿ç”¨ Class ç±»çš„ newInstance æ–¹æ³•(åå°„æœºåˆ¶)ã€‚
3. ä½¿ç”¨ Constructor ç±»çš„ newInstance æ–¹æ³•(åå°„æœºåˆ¶)ã€‚
4. ä½¿ç”¨ clone æ–¹æ³•åˆ›å»ºå¯¹è±¡ã€‚
5. ä½¿ç”¨(å)åºåˆ—åŒ–æœºåˆ¶åˆ›å»ºå¯¹è±¡ã€‚

## Java é›†åˆæ¡†æ¶æœ‰å“ªäº›ï¼Ÿ

Java é›†åˆæ¡†æ¶ï¼Œå¯ä»¥çœ‹çœ‹ [ã€ŠJava é›†åˆæ¡†æ¶ã€‹](http://www.runoob.com/java/java-collections.html) æ–‡ç« ã€‚

ğŸ¦… **è¯´å‡ºä¸€äº›é›†åˆæ¡†æ¶çš„ä¼˜ç‚¹ï¼Ÿ**

é›†åˆæ¡†æ¶çš„éƒ¨åˆ†ä¼˜ç‚¹å¦‚ä¸‹ï¼š

- 1ã€ä½¿ç”¨æ ¸å¿ƒé›†åˆç±»é™ä½å¼€å‘æˆæœ¬ï¼Œè€Œéå®ç°æˆ‘ä»¬è‡ªå·±çš„é›†åˆç±»ã€‚
- 2ã€éšç€ä½¿ç”¨ç»è¿‡ä¸¥æ ¼æµ‹è¯•çš„é›†åˆæ¡†æ¶ç±»ï¼Œä»£ç è´¨é‡ä¼šå¾—åˆ°æé«˜ã€‚
- 3ã€é€šè¿‡ä½¿ç”¨ JDK é™„å¸¦çš„é›†åˆç±»ï¼Œå¯ä»¥é™ä½ä»£ç ç»´æŠ¤æˆæœ¬ã€‚
- 4ã€å¤ç”¨æ€§å’Œå¯æ“ä½œæ€§ã€‚

ğŸ¦… **é›†åˆæ¡†æ¶ä¸­çš„æ³›å‹æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ**

Java5 å¼•å…¥äº†æ³›å‹ï¼Œæ‰€æœ‰çš„é›†åˆæ¥å£å’Œå®ç°éƒ½å¤§é‡åœ°ä½¿ç”¨å®ƒã€‚æ³›å‹å…è®¸æˆ‘ä»¬ä¸ºé›†åˆæä¾›ä¸€ä¸ªå¯ä»¥å®¹çº³çš„å¯¹è±¡ç±»å‹ã€‚å› æ­¤ï¼Œå¦‚æœä½ æ·»åŠ å…¶å®ƒç±»å‹çš„ä»»ä½•å…ƒç´ ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘æ—¶æŠ¥é”™ã€‚è¿™é¿å…äº†åœ¨è¿è¡Œæ—¶å‡ºç° ClassCastExceptionï¼Œå› ä¸ºä½ å°†ä¼šåœ¨ç¼–è¯‘æ—¶å¾—åˆ°æŠ¥é”™ä¿¡æ¯ã€‚

æ³›å‹ä¹Ÿä½¿å¾—ä»£ç æ•´æ´ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨æ˜¾å¼è½¬æ¢å’Œ `instanceOf` æ“ä½œç¬¦ã€‚å®ƒä¹Ÿç»™è¿è¡Œæ—¶å¸¦æ¥å¥½å¤„ï¼Œå› ä¸ºä¸ä¼šäº§ç”Ÿç±»å‹æ£€æŸ¥çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚

## Java é›†åˆæ¡†æ¶çš„åŸºç¡€æ¥å£æœ‰å“ªäº›ï¼Ÿ

- Collection ï¼Œä¸ºé›†åˆå±‚çº§çš„æ ¹æ¥å£ã€‚ä¸€ä¸ªé›†åˆä»£è¡¨ä¸€ç»„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å³ä¸ºå®ƒçš„å…ƒç´ ã€‚Java å¹³å°ä¸æä¾›è¿™ä¸ªæ¥å£ä»»ä½•ç›´æ¥çš„å®ç°ã€‚
  - Set ï¼Œæ˜¯ä¸€ä¸ªä¸èƒ½åŒ…å«é‡å¤å…ƒç´ çš„é›†åˆã€‚è¿™ä¸ªæ¥å£å¯¹æ•°å­¦é›†åˆæŠ½è±¡è¿›è¡Œå»ºæ¨¡ï¼Œè¢«ç”¨æ¥ä»£è¡¨é›†åˆï¼Œå°±å¦‚ä¸€å‰¯ç‰Œã€‚
  - List ï¼Œæ˜¯ä¸€ä¸ªæœ‰åºé›†åˆï¼Œå¯ä»¥åŒ…å«é‡å¤å…ƒç´ ã€‚ä½ å¯ä»¥é€šè¿‡å®ƒçš„ç´¢å¼•æ¥è®¿é—®ä»»ä½•å…ƒç´ ã€‚List æ›´åƒé•¿åº¦åŠ¨æ€å˜æ¢çš„æ•°ç»„ã€‚
- Map ï¼Œæ˜¯ä¸€ä¸ªå°† key æ˜ å°„åˆ° value çš„å¯¹è±¡ã€‚ä¸€ä¸ª Map ä¸èƒ½åŒ…å«é‡å¤çš„ keyï¼Œæ¯ä¸ª key æœ€å¤šåªèƒ½æ˜ å°„ä¸€ä¸ª value ã€‚
- ä¸€äº›å…¶å®ƒçš„æ¥å£æœ‰ Queueã€Dequeueã€SortedSetã€SortedMap å’Œ ListIterator ã€‚

ğŸ¦… **ä¸ºä½• Collection ä¸ä» Cloneable å’Œ Serializable æ¥å£ç»§æ‰¿ï¼Ÿ**

Collection æ¥å£æŒ‡å®šä¸€ç»„å¯¹è±¡ï¼Œå¯¹è±¡å³ä¸ºå®ƒçš„å…ƒç´ ã€‚

- å¦‚ä½•ç»´æŠ¤è¿™äº›å…ƒç´ ç”± Collection çš„å…·ä½“å®ç°å†³å®šã€‚ä¾‹å¦‚ï¼Œä¸€äº›å¦‚ List çš„ Collection å®ç°å…è®¸é‡å¤çš„å…ƒç´ ï¼Œè€Œå…¶å®ƒçš„å¦‚ Set å°±ä¸å…è®¸ã€‚
- å¾ˆå¤š Collection å®ç°æœ‰ä¸€ä¸ªå…¬æœ‰çš„ clone æ–¹æ³•ã€‚ç„¶è€Œï¼ŒæŠŠå®ƒæ”¾åˆ°é›†åˆçš„æ‰€æœ‰å®ç°ä¸­ä¹Ÿæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚è¿™æ˜¯å› ä¸º Collection æ˜¯ä¸€ä¸ªæŠ½è±¡è¡¨ç°ï¼Œé‡è¦çš„æ˜¯å®ç°ã€‚

å½“ä¸å…·ä½“å®ç°æ‰“äº¤é“çš„æ—¶å€™ï¼Œå…‹éš†æˆ–åºåˆ—åŒ–çš„è¯­ä¹‰å’Œå«ä¹‰æ‰å‘æŒ¥ä½œç”¨ã€‚æ‰€ä»¥ï¼Œå…·ä½“å®ç°åº”è¯¥å†³å®šå¦‚ä½•å¯¹å®ƒè¿›è¡Œå…‹éš†æˆ–åºåˆ—åŒ–ï¼Œæˆ–å®ƒæ˜¯å¦å¯ä»¥è¢«å…‹éš†æˆ–åºåˆ—åŒ–ã€‚åœ¨æ‰€æœ‰çš„å®ç°ä¸­æˆæƒå…‹éš†å’Œåºåˆ—åŒ–ï¼Œæœ€ç»ˆå¯¼è‡´æ›´å°‘çš„çµæ´»æ€§å’Œæ›´å¤šçš„é™åˆ¶ï¼Œ**ç‰¹å®šçš„å®ç°åº”è¯¥å†³å®šå®ƒæ˜¯å¦å¯ä»¥è¢«å…‹éš†å’Œåºåˆ—åŒ–**ã€‚

ğŸ¦… **ä¸ºä½• Map æ¥å£ä¸ç»§æ‰¿ Collection æ¥å£ï¼Ÿ**

å°½ç®¡ Map æ¥å£å’Œå®ƒçš„å®ç°ä¹Ÿæ˜¯é›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œä½† Map ä¸æ˜¯é›†åˆï¼Œé›†åˆä¹Ÿä¸æ˜¯ Mapã€‚å› æ­¤ï¼ŒMap ç»§æ‰¿ Collection æ¯«æ— æ„ä¹‰ï¼Œåä¹‹äº¦ç„¶ã€‚

å¦‚æœ Map ç»§æ‰¿ Collection æ¥å£ï¼Œé‚£ä¹ˆå…ƒç´ å»å“ªå„¿ï¼ŸMap åŒ…å« key-value å¯¹ï¼Œå®ƒæä¾›æŠ½å– key æˆ– value åˆ—è¡¨é›†åˆ( Collection )çš„æ–¹æ³•ï¼Œä½†æ˜¯å®ƒä¸é€‚åˆâ€œä¸€ç»„å¯¹è±¡â€è§„èŒƒã€‚

ğŸ¦… **Collection å’Œ Collections çš„åŒºåˆ«ï¼Ÿ**

- Collection ï¼Œæ˜¯é›†åˆç±»çš„ä¸Šçº§æ¥å£ï¼Œç»§æ‰¿ä¸ä»–çš„æ¥å£ä¸»è¦æœ‰ Set å’ŒList ã€‚
- Collections ï¼Œæ˜¯é’ˆå¯¹é›†åˆç±»çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—é™æ€æ–¹æ³•å®ç°å¯¹å„ç§é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰æ“ä½œã€‚

ğŸ¦… **é›†åˆæ¡†æ¶é‡Œå®ç°çš„é€šç”¨ç®—æ³•æœ‰å“ªäº›ï¼Ÿ**

Java é›†åˆæ¡†æ¶æä¾›å¸¸ç”¨çš„ç®—æ³•å®ç°ï¼Œæ¯”å¦‚æ’åºå’Œæœç´¢ã€‚

Collectionsç±»åŒ…å«è¿™äº›æ–¹æ³•å®ç°ã€‚å¤§éƒ¨åˆ†ç®—æ³•æ˜¯æ“ä½œ List çš„ï¼Œä½†ä¸€éƒ¨åˆ†å¯¹æ‰€æœ‰ç±»å‹çš„é›†åˆéƒ½æ˜¯å¯ç”¨çš„ã€‚éƒ¨åˆ†ç®—æ³•æœ‰æ’åºã€æœç´¢ã€æ··ç¼–ã€æœ€å¤§æœ€å°å€¼ã€‚

ğŸ¦… **é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„æ€»ç»“**

1ï¼‰List

- ArrayList ï¼šObject æ•°ç»„ã€‚
- Vector ï¼šObject æ•°ç»„ã€‚
- LinkedList ï¼šåŒå‘é“¾è¡¨(JDK6 ä¹‹å‰ä¸ºå¾ªç¯é“¾è¡¨ï¼ŒJDK7 å–æ¶ˆäº†å¾ªç¯)ã€‚

2ï¼‰Map

- HashMap ï¼š
  - JDK8 ä¹‹å‰ï¼ŒHashMap ç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼ˆâ€œæ‹‰é“¾æ³•â€è§£å†³å†²çªï¼‰ã€‚
  - JDK8 ä»¥åï¼Œåœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 8 ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚
- LinkedHashMap ï¼šLinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥å®ƒçš„åº•å±‚ä»ç„¶æ˜¯åŸºäºæ‹‰é“¾å¼æ•£åˆ—ç»“æ„å³ç”±æ•°ç»„å’Œé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»„æˆã€‚å¦å¤–ï¼ŒLinkedHashMap åœ¨ä¸Šé¢ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€æ¡åŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚åŒæ—¶é€šè¿‡å¯¹é“¾è¡¨è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå®ç°äº†è®¿é—®é¡ºåºç›¸å…³é€»è¾‘ã€‚è¯¦ç»†å¯ä»¥æŸ¥çœ‹ï¼š[ã€ŠLinkedHashMap æºç è¯¦ç»†åˆ†æï¼ˆJDK1.8ï¼‰ã€‹](https://www.imooc.com/article/22931) ã€‚
- Hashtable ï¼šæ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ã€‚
- TreeMap ï¼šçº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰ã€‚

3ï¼‰Set

- HashSet ï¼šæ— åºï¼Œå”¯ä¸€ï¼ŒåŸºäº HashMap å®ç°çš„ï¼Œåº•å±‚é‡‡ç”¨ HashMap æ¥ä¿å­˜å…ƒç´ ã€‚
- LinkedHashSet ï¼šLinkedHashSet ç»§æ‰¿è‡ª HashSetï¼Œå¹¶ä¸”å…¶å†…éƒ¨æ˜¯é€šè¿‡ LinkedHashMap æ¥å®ç°çš„ã€‚æœ‰ç‚¹ç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰è¯´çš„LinkedHashMap å…¶å†…éƒ¨æ˜¯åŸºäº HashMap å®ç°ä¸€æ ·ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹åŒºåˆ«çš„ã€‚
- TreeSet ï¼šæœ‰åºï¼Œå”¯ä¸€ï¼Œçº¢é»‘æ ‘(è‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘)ã€‚

## ä»€ä¹ˆæ˜¯è¿­ä»£å™¨(Iterator)ï¼Ÿ

Iterator æ¥å£ï¼Œæä¾›äº†å¾ˆå¤šå¯¹é›†åˆå…ƒç´ è¿›è¡Œè¿­ä»£çš„æ–¹æ³•ã€‚æ¯ä¸€ä¸ªé›†åˆç±»éƒ½åŒ…å«äº†å¯ä»¥è¿”å›è¿­ä»£å™¨å®ä¾‹çš„è¿­ä»£æ–¹æ³•ã€‚è¿­ä»£å™¨å¯ä»¥åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­åˆ é™¤åº•å±‚é›†åˆçš„å…ƒç´ ï¼Œä½†æ˜¯ä¸å¯ä»¥ç›´æ¥è°ƒç”¨é›†åˆçš„ `#remove(Object Obj)` æ–¹æ³•åˆ é™¤ï¼Œå¯ä»¥é€šè¿‡è¿­ä»£å™¨çš„ `#remove()` æ–¹æ³•åˆ é™¤ã€‚

ğŸ¦… **Iterator å’Œ ListIterator çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**

- Iterator å¯ç”¨æ¥éå† Set å’Œ List é›†åˆï¼Œä½†æ˜¯ ListIterator åªèƒ½ç”¨æ¥éå† Listã€‚
- Iterator å¯¹é›†åˆåªèƒ½æ˜¯å‰å‘éå†ï¼ŒListIterator æ—¢å¯ä»¥å‰å‘ä¹Ÿå¯ä»¥åå‘ã€‚
- ListIterator å®ç°äº† Iterator æ¥å£ï¼Œå¹¶åŒ…å«å…¶ä»–çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼šå¢åŠ å…ƒç´ ï¼Œæ›¿æ¢å…ƒç´ ï¼Œè·å–å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ç­‰ç­‰ã€‚

ğŸ¦… **å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰å’Œå®‰å…¨å¤±è´¥ï¼ˆfail-safeï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**

å·®åˆ«åœ¨äº ConcurrentModification å¼‚å¸¸ï¼š

- å¿«é€Ÿå¤±è´¥ï¼šå½“ä½ åœ¨è¿­ä»£ä¸€ä¸ªé›†åˆçš„æ—¶å€™ï¼Œå¦‚æœæœ‰å¦ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ä¿®æ”¹ä½ æ­£åœ¨è®¿é—®çš„é‚£ä¸ªé›†åˆæ—¶ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ª ConcurrentModification å¼‚å¸¸ã€‚ åœ¨ `java.util` åŒ…ä¸‹çš„éƒ½æ˜¯å¿«é€Ÿå¤±è´¥ã€‚
- å®‰å…¨å¤±è´¥ï¼šä½ åœ¨è¿­ä»£çš„æ—¶å€™ä¼šå»åº•å±‚é›†åˆåšä¸€ä¸ªæ‹·è´ï¼Œæ‰€ä»¥ä½ åœ¨ä¿®æ”¹ä¸Šå±‚é›†åˆçš„æ—¶å€™æ˜¯ä¸ä¼šå—å½±å“çš„ï¼Œä¸ä¼šæŠ›å‡º ConcurrentModification å¼‚å¸¸ã€‚åœ¨ `java.util.concurrent` åŒ…ä¸‹çš„å…¨æ˜¯å®‰å…¨å¤±è´¥çš„ã€‚

ğŸ¦… **å¦‚ä½•åˆ é™¤ List ä¸­çš„æŸä¸ªå…ƒç´ ï¼Ÿ**

æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š

- æ–¹å¼ä¸€ï¼Œä½¿ç”¨ Iterator ï¼Œé¡ºåºå‘ä¸‹ï¼Œå¦‚æœæ‰¾åˆ°å…ƒç´ ï¼Œåˆ™ä½¿ç”¨ remove æ–¹æ³•è¿›è¡Œç§»é™¤ã€‚
- æ–¹å¼äºŒï¼Œå€’åºéå† List ï¼Œå¦‚æœæ‰¾åˆ°å…ƒç´ ï¼Œåˆ™ä½¿ç”¨ remove æ–¹æ³•è¿›è¡Œç§»é™¤ã€‚

ğŸ¦… **Enumeration å’Œ Iterator æ¥å£æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ**

- Enumeration è·Ÿ Iterator ç›¸æ¯”è¾ƒå¿«ä¸¤å€ï¼Œè€Œä¸”å ç”¨æ›´å°‘çš„å†…å­˜ã€‚
- ä½†æ˜¯ï¼ŒIterator ç›¸å¯¹äº Enumeration æ›´å®‰å…¨ï¼Œå› ä¸ºå…¶ä»–çº¿ç¨‹ä¸èƒ½ä¿®æ”¹å½“å‰è¿­ä»£å™¨éå†çš„é›†åˆå¯¹è±¡ã€‚åŒæ—¶ï¼ŒIterators å…è®¸è°ƒç”¨è€…ä»åº•å±‚é›†åˆä¸­ç§»é™¤å…ƒç´ ï¼Œè¿™äº› Enumerations éƒ½æ²¡æ³•å®Œæˆã€‚

å¯¹äºå¾ˆå¤šèƒ–å‹ï¼Œå¯èƒ½å¹¶æœªä½¿ç”¨è¿‡ Enumeration ç±»ï¼Œæ‰€ä»¥å¯ä»¥çœ‹çœ‹ [ã€ŠJava Enumeration æ¥å£ã€‹](http://www.runoob.com/java/java-enumeration-interface.html) æ–‡ç« ã€‚

ğŸ¦… **ä¸ºä½• Iterator æ¥å£æ²¡æœ‰å…·ä½“çš„å®ç°ï¼Ÿ**

Iterator æ¥å£ï¼Œå®šä¹‰äº†éå†é›†åˆçš„æ–¹æ³•ï¼Œä½†å®ƒçš„å®ç°åˆ™æ˜¯é›†åˆå®ç°ç±»çš„è´£ä»»ã€‚æ¯ä¸ªèƒ½å¤Ÿè¿”å›ç”¨äºéå†çš„ Iterator çš„é›†åˆç±»éƒ½æœ‰å®ƒè‡ªå·±çš„ Iterator å®ç°å†…éƒ¨ç±»ã€‚

è¿™å°±å…è®¸é›†åˆç±»å»é€‰æ‹©è¿­ä»£å™¨æ˜¯ fail-fast è¿˜æ˜¯ fail-safe çš„ã€‚æ¯”å¦‚ï¼ŒArrayList è¿­ä»£å™¨æ˜¯ fail-fast çš„ï¼Œè€Œ CopyOnWriteArrayList è¿­ä»£å™¨æ˜¯ fail-safe çš„ã€‚

## Comparable å’Œ Comparator çš„åŒºåˆ«?

- Comparable æ¥å£ï¼Œåœ¨ `java.lang` åŒ…ä¸‹ï¼Œç”¨äºå½“å‰å¯¹è±¡å’Œå…¶å®ƒå¯¹è±¡çš„æ¯”è¾ƒï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ª `#compareTo(Object obj)` æ–¹æ³•ç”¨æ¥æ’åºï¼Œè¯¥æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ã€‚
- Comparator æ¥å£ï¼Œåœ¨ `java.util` åŒ…ä¸‹ï¼Œç”¨äºä¼ å…¥çš„ä¸¤ä¸ªå¯¹è±¡çš„æ¯”è¾ƒï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ª `#compare(Object obj1, Object obj2)` æ–¹æ³•ç”¨æ¥æ’åºï¼Œè¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ã€‚

è¯¦ç»†çš„ï¼Œå¯ä»¥çœ‹çœ‹ [ã€ŠJava è‡ªå®šä¹‰æ¯”è¾ƒå™¨ã€‹](https://blog.csdn.net/whing123/article/details/77851737) æ–‡ç« ï¼Œé‡ç‚¹æ˜¯å¦‚ä½•è‡ªå·±å®ç° Comparable å’Œ Comparator çš„æ–¹æ³•ã€‚

ğŸ¦… **compareTo æ–¹æ³•çš„è¿”å›å€¼è¡¨ç¤ºçš„æ„æ€ï¼Ÿ**

- å¤§äº 0 ï¼Œè¡¨ç¤ºå¯¹è±¡å¤§äºå‚æ•°å¯¹è±¡ã€‚
- å°äº 0 ï¼Œè¡¨ç¤ºå¯¹è±¡å°äºå‚æ•°å¯¹è±¡
- ç­‰äº 0 ï¼Œè¡¨ç¤ºä¸¤è€…ç›¸ç­‰ã€‚

ğŸ¦… **å¦‚ä½•å¯¹ Object çš„ List æ’åºï¼Ÿ**

- å¯¹ `Object[]` æ•°ç»„è¿›è¡Œæ’åºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `Arrays#sort(...)` æ–¹æ³•ã€‚
- å¯¹ `List` æ•°ç»„è¿›è¡Œæ’åºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `Collections#sort(...)` æ–¹æ³•ã€‚

## æœ‰å“ªäº›å…³äº Java é›†åˆæ¡†æ¶çš„æœ€ä½³å®è·µï¼Ÿ

- åŸºäºåº”ç”¨çš„éœ€æ±‚æ¥é€‰æ‹©ä½¿ç”¨æ­£ç¡®ç±»å‹çš„é›†åˆï¼Œè¿™å¯¹æ€§èƒ½æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå…ƒç´ çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”çŸ¥é“ä¼˜å…ˆçº§ï¼Œæˆ‘ä»¬å°†ä¼šä½¿ç”¨ä¸€ä¸ª Array ï¼Œè€Œä¸æ˜¯ ArrayList ã€‚
- ä¸€äº›é›†åˆç±»å…è®¸æˆ‘ä»¬æŒ‡å®šä»–ä»¬çš„åˆå§‹å®¹é‡ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“å­˜å‚¨æ•°æ®çš„å¤§æ¦‚æ•°å€¼ï¼Œå°±å¯ä»¥é¿å…é‡æ•£åˆ—æˆ–è€…å¤§å°çš„è°ƒæ•´ã€‚
- æ€»æ˜¯ä½¿ç”¨æ³›å‹æ¥ä¿è¯ç±»å‹å®‰å…¨ï¼Œå¯é æ€§å’Œå¥å£®æ€§ã€‚åŒæ—¶ï¼Œä½¿ç”¨æ³›å‹è¿˜å¯ä»¥é¿å…è¿è¡Œæ—¶çš„ ClassCastException å¼‚å¸¸ã€‚
- åœ¨ Map ä¸­ä½¿ç”¨ JDK æä¾›çš„ä¸å¯å˜ç±»ä½œä¸ºä¸€ä¸ª keyï¼Œè¿™æ ·å¯ä»¥é¿å… hashcode çš„å®ç°å’Œæˆ‘ä»¬è‡ªå®šä¹‰ç±»çš„ equals æ–¹æ³•ã€‚
- åº”è¯¥ä¾ç…§æ¥å£è€Œä¸æ˜¯å®ç°æ¥ç¼–ç¨‹ã€‚
- è¿”å›é›¶é•¿åº¦çš„é›†åˆæˆ–è€…æ•°ç»„ï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ª `null` ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢åº•å±‚é›†åˆæ˜¯ç©ºçš„ã€‚

# åŒºåˆ«

## List å’Œ Set åŒºåˆ«ï¼Ÿ

Listï¼ŒSet éƒ½æ˜¯ç»§æ‰¿è‡ª Collection æ¥å£ã€‚

- List ç‰¹ç‚¹ï¼šå…ƒç´ æœ‰æ”¾å…¥é¡ºåºï¼Œå…ƒç´ å¯é‡å¤ã€‚
- Set ç‰¹ç‚¹ï¼šå…ƒç´ æ— æ”¾å…¥é¡ºåºï¼Œå…ƒç´ ä¸å¯é‡å¤ï¼Œé‡å¤å…ƒç´ ä¼šè¦†ç›–æ‰ã€‚

> æ³¨æ„ï¼šå…ƒç´ è™½ç„¶æ— æ”¾å…¥é¡ºåºï¼Œä½†æ˜¯å…ƒç´ åœ¨ Set ä¸­çš„ä½ç½®æ˜¯æœ‰è¯¥å…ƒç´ çš„ hashcode å†³å®šçš„ï¼Œå…¶ä½ç½®å…¶å®æ˜¯å›ºå®šçš„ã€‚
>
> å¦å¤– List æ”¯æŒ `for` å¾ªç¯ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸‹æ ‡æ¥éå†ï¼Œä¹Ÿå¯ä»¥ç”¨è¿­ä»£å™¨ï¼Œä½†æ˜¯ Set åªèƒ½ç”¨è¿­ä»£ï¼Œå› ä¸ºä»–æ— åºï¼Œæ— æ³•ç”¨ä¸‹æ ‡æ¥å–å¾—æƒ³è¦çš„å€¼ã€‚

Set å’Œ List å¯¹æ¯”ï¼š

- Setï¼šæ£€ç´¢æŒ‡å®šçš„å…ƒç´ æ•ˆç‡é«˜ï¼Œåˆ é™¤å’Œæ’å…¥æ•ˆç‡é«˜ï¼Œæ’å…¥å’Œåˆ é™¤**å¯èƒ½ä¼š**å¼•èµ·å…ƒç´ ä½ç½®æ”¹å˜ã€‚
- Listï¼šå’Œæ•°ç»„ç±»ä¼¼ï¼ŒList å¯ä»¥åŠ¨æ€å¢é•¿ï¼ŒæŸ¥æ‰¾**æŒ‡å®šçš„**å…ƒç´ æ•ˆç‡ä½ï¼Œæ’å…¥åˆ é™¤æŒ‡å®šçš„å…ƒç´ æ•ˆç‡ä½ï¼Œå› ä¸ºå¯èƒ½ä¼šå¼•èµ·å…¶ä»–å…ƒç´ ä½ç½®æ”¹å˜ã€‚

å½“ç„¶ï¼Œå¦‚æœæ˜¯éšæœºè®¿é—®ï¼ˆæŒ‡å®šä¸‹æ ‡ï¼‰ï¼Œåˆ™ List ä¼šå¿«äº Set ã€‚æ€»ä¹‹ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ Set ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ List ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ˜ç¡®çš„ã€‚

## List å’Œ Map åŒºåˆ«ï¼Ÿ

- List æ˜¯å¯¹è±¡é›†åˆï¼Œå…è®¸å¯¹è±¡é‡å¤ã€‚
- Map æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä¸å…è®¸ key é‡å¤ã€‚

## Array å’Œ ArrayList æœ‰ä½•åŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™æ›´é€‚åˆç”¨ Arrayï¼Ÿ

- Array å¯ä»¥å®¹çº³åŸºæœ¬ç±»å‹å’Œå¯¹è±¡ï¼Œè€Œ ArrayList åªèƒ½å®¹çº³å¯¹è±¡ã€‚
- Array æ˜¯æŒ‡å®šå¤§å°çš„ï¼Œè€Œ ArrayList å¤§å°æ˜¯å›ºå®šçš„ï¼Œå¯è‡ªåŠ¨æ‰©å®¹ã€‚
- Array æ²¡æœ‰æä¾› ArrayList é‚£ä¹ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ addAllã€removeAll å’Œ iterator ç­‰ã€‚

å°½ç®¡ ArrayList æ˜æ˜¾æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œä½†ä¹Ÿæœ‰äº›æ—¶å€™ Array æ¯”è¾ƒå¥½ç”¨ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¸‰ç§æƒ…å†µã€‚

- 1ã€å¦‚æœåˆ—è¡¨çš„å¤§å°å·²ç»æŒ‡å®šï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯å­˜å‚¨å’Œéå†å®ƒä»¬
- 2ã€å¯¹äºéå†åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå°½ç®¡ Collections ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥å‡è½»ç¼–ç ä»»åŠ¡ï¼Œåœ¨æŒ‡å®šå¤§å°çš„åŸºæœ¬ç±»å‹çš„åˆ—è¡¨ä¸Šå·¥ä½œä¹Ÿä¼šå˜å¾—å¾ˆæ…¢ã€‚
- 3ã€å¦‚æœä½ è¦ä½¿ç”¨å¤šç»´æ•°ç»„ï¼Œä½¿ç”¨ `[][]` æ¯” List ä¼šæ–¹ä¾¿ã€‚

## ArrayList ä¸ LinkedList åŒºåˆ«ï¼Ÿ

ğŸ¦… **ArrayList**

- ä¼˜ç‚¹ï¼šArrayList æ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œå› ä¸ºåœ°å€è¿ç»­ï¼Œä¸€æ—¦æ•°æ®å­˜å‚¨å¥½äº†ï¼ŒæŸ¥è¯¢æ“ä½œæ•ˆç‡ä¼šæ¯”è¾ƒé«˜ï¼ˆåœ¨å†…å­˜é‡Œæ˜¯è¿ç€æ”¾çš„ï¼‰ã€‚
- ç¼ºç‚¹ï¼šå› ä¸ºåœ°å€è¿ç»­ï¼ŒArrayList è¦ç§»åŠ¨æ•°æ®ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤æ“ä½œæ•ˆç‡æ¯”è¾ƒä½ã€‚

ğŸ¦… **LinkedList**

- ä¼˜ç‚¹ï¼šLinkedList åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œåœ°å€æ˜¯ä»»æ„çš„ï¼Œæ‰€ä»¥åœ¨å¼€è¾Ÿå†…å­˜ç©ºé—´çš„æ—¶å€™ä¸éœ€è¦ç­‰ä¸€ä¸ªè¿ç»­çš„åœ°å€ã€‚å¯¹äºæ–°å¢å’Œåˆ é™¤æ“ä½œ add å’Œ remove ï¼ŒLinedList æ¯”è¾ƒå ä¼˜åŠ¿ã€‚LinkedList é€‚ç”¨äºè¦å¤´å°¾æ“ä½œæˆ–æ’å…¥æŒ‡å®šä½ç½®çš„åœºæ™¯ã€‚
- ç¼ºç‚¹ï¼šå› ä¸º LinkedList è¦ç§»åŠ¨æŒ‡é’ˆï¼Œæ‰€ä»¥æŸ¥è¯¢æ“ä½œæ€§èƒ½æ¯”è¾ƒä½ã€‚

ğŸ¦… **é€‚ç”¨åœºæ™¯åˆ†æ**ï¼š

- å½“éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¯¹éšæœºè®¿é—®çš„æƒ…å†µä¸‹ï¼Œé€‰ç”¨ ArrayList ã€‚

- å½“éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¤šæ¬¡å¢åŠ åˆ é™¤ä¿®æ”¹æ—¶ï¼Œé‡‡ç”¨ LinkedList ã€‚

  > å¦‚æœå®¹é‡å›ºå®šï¼Œå¹¶ä¸”åªä¼šæ·»åŠ åˆ°å°¾éƒ¨ï¼Œä¸ä¼šå¼•èµ·æ‰©å®¹ï¼Œä¼˜å…ˆé‡‡ç”¨ ArrayList ã€‚

- å½“ç„¶ï¼Œç»å¤§æ•°ä¸šåŠ¡çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ ArrayList å°±å¤Ÿäº†ã€‚ä¸»è¦æ˜¯ï¼Œæ³¨æ„å¥½é¿å… ArrayList çš„æ‰©å®¹ï¼Œä»¥åŠéé¡ºåºçš„æ’å…¥ã€‚

ğŸ¦… **ArrayList æ˜¯å¦‚ä½•æ‰©å®¹çš„ï¼Ÿ**

ç›´æ¥çœ‹ [ã€ŠArrayList åŠ¨æ€æ‰©å®¹è¯¦è§£ã€‹](https://www.cnblogs.com/kuoAT/p/6771653.html) æ–‡ç« ï¼Œå¾ˆè¯¦ç»†ã€‚ä¸»è¦ç»“è®ºå¦‚ä¸‹ï¼š

- å¦‚æœé€šè¿‡æ— å‚æ„é€ çš„è¯ï¼Œåˆå§‹æ•°ç»„å®¹é‡ä¸º 0 ï¼Œå½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ æ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚æ¯æ¬¡æŒ‰ç…§ **1.5** å€ï¼ˆä½è¿ç®—ï¼‰çš„æ¯”ç‡é€šè¿‡ copeOf çš„æ–¹å¼æ‰©å®¹ã€‚
- åœ¨ JKD6 ä¸­å®ç°æ˜¯ï¼Œå¦‚æœé€šè¿‡æ— å‚æ„é€ çš„è¯ï¼Œåˆå§‹æ•°ç»„å®¹é‡ä¸º10ï¼Œæ¯æ¬¡é€šè¿‡ copeOf çš„æ–¹å¼æ‰©å®¹åå®¹é‡ä¸ºåŸæ¥çš„ **1.5** å€ã€‚

> é‡ç‚¹æ˜¯ 1.5 å€æ‰©å®¹ï¼Œè¿™æ˜¯å’Œ HashMap 2 å€æ‰©å®¹ä¸åŒçš„åœ°æ–¹ã€‚

ğŸ¦… **ArrayList é›†åˆåŠ å…¥ 1 ä¸‡æ¡æ•°æ®ï¼Œåº”è¯¥æ€ä¹ˆæé«˜æ•ˆç‡ï¼Ÿ**

ArrayList çš„é»˜è®¤åˆå§‹å®¹é‡ä¸º 10 ï¼Œè¦æ’å…¥å¤§é‡æ•°æ®çš„æ—¶å€™éœ€è¦ä¸æ–­æ‰©å®¹ï¼Œè€Œæ‰©å®¹æ˜¯éå¸¸å½±å“æ€§èƒ½çš„ã€‚å› æ­¤ï¼Œç°åœ¨æ˜ç¡®äº† 10 ä¸‡æ¡æ•°æ®äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±è®¾ç½® ArrayList çš„å®¹é‡ï¼

è¿™æ ·å°±å¯ä»¥æé«˜æ•ˆç‡äº†~

## ArrayList ä¸ Vector åŒºåˆ«ï¼Ÿ

ArrayList å’Œ Vector éƒ½æ˜¯ç”¨æ•°ç»„å®ç°çš„ï¼Œä¸»è¦æœ‰è¿™ä¹ˆä¸‰ä¸ªåŒºåˆ«ï¼š

- 1ã€Vector æ˜¯å¤šçº¿ç¨‹å®‰å…¨çš„ï¼Œçº¿ç¨‹å®‰å…¨å°±æ˜¯è¯´å¤šçº¿ç¨‹è®¿é—®åŒä¸€ä»£ç ï¼Œä¸ä¼šäº§ç”Ÿä¸ç¡®å®šçš„ç»“æœï¼Œè€Œ ArrayList ä¸æ˜¯ã€‚è¿™ä¸ªå¯ä»¥ä»æºç ä¸­çœ‹å‡ºï¼ŒVector ç±»ä¸­çš„æ–¹æ³•å¾ˆå¤šæœ‰ `synchronized` è¿›è¡Œä¿®é¥°ï¼Œè¿™æ ·å°±å¯¼è‡´äº† Vector åœ¨æ•ˆç‡ä¸Šæ— æ³•ä¸ ArrayList ç›¸æ¯”ã€‚

  > Vector æ˜¯ä¸€ç§è€çš„åŠ¨æ€æ•°ç»„ï¼Œæ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œæ•ˆç‡å¾ˆä½ï¼Œä¸€èˆ¬ä¸èµæˆä½¿ç”¨ã€‚

- 2ã€ä¸¤ä¸ªéƒ½æ˜¯é‡‡ç”¨çš„çº¿æ€§è¿ç»­ç©ºé—´å­˜å‚¨å…ƒç´ ï¼Œä½†æ˜¯å½“ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼Œä¸¤ä¸ªç±»çš„å¢åŠ æ–¹å¼æ˜¯ä¸åŒã€‚

- 3ã€Vector å¯ä»¥è®¾ç½®å¢é•¿å› å­ï¼Œè€Œ ArrayList ä¸å¯ä»¥ã€‚

é€‚ç”¨åœºæ™¯åˆ†æï¼š

- 1ã€Vector æ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ ArrayList æ˜¯çº¿ç¨‹æ— éœ€åŒæ­¥çš„ï¼Œæ˜¯ä¸å®‰å…¨çš„ã€‚å¦‚æœä¸è€ƒè™‘åˆ°çº¿ç¨‹çš„å®‰å…¨å› ç´ ï¼Œä¸€èˆ¬ç”¨ ArrayList æ•ˆç‡æ¯”è¾ƒé«˜ã€‚

  > å®é™…åœºæ™¯ä¸‹ï¼Œå¦‚æœéœ€è¦å¤šçº¿ç¨‹è®¿é—®å®‰å…¨çš„æ•°ç»„ï¼Œä½¿ç”¨ CopyOnWriteArrayList ã€‚

- 2ã€å¦‚æœé›†åˆä¸­çš„å…ƒç´ çš„æ•°ç›®å¤§äºç›®å‰é›†åˆæ•°ç»„çš„é•¿åº¦æ—¶ï¼Œåœ¨é›†åˆä¸­ä½¿ç”¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ•°æ®ï¼Œç”¨ Vector æœ‰ä¸€å®šçš„ä¼˜åŠ¿ã€‚

  > è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ LinkedList æ›´åˆé€‚ã€‚

## HashMap å’Œ Hashtable çš„åŒºåˆ«ï¼Ÿ

> Hashtable æ˜¯åœ¨ Java 1.0 çš„æ—¶å€™åˆ›å»ºçš„ï¼Œè€Œé›†åˆçš„ç»Ÿä¸€è§„èŒƒå‘½åæ˜¯åœ¨åæ¥çš„ Java2.0 å¼€å§‹çº¦å®šçš„ï¼Œè€Œå½“æ—¶å…¶ä»–ä¸€éƒ¨åˆ†é›†åˆç±»çš„å‘å¸ƒæ„æˆäº†æ–°çš„é›†åˆæ¡†æ¶ã€‚

- Hashtable ç»§æ‰¿ Dictionary ï¼ŒHashMap ç»§æ‰¿çš„æ˜¯ Java2 å‡ºç°çš„ Map æ¥å£ã€‚
- 2ã€HashMap å»æ‰äº† Hashtable çš„ contains æ–¹æ³•ï¼Œä½†æ˜¯åŠ ä¸Šäº† containsValue å’Œ containsKey æ–¹æ³•ã€‚
- 3ã€HashMap å…è®¸ç©ºé”®å€¼ï¼Œè€Œ Hashtable ä¸å…è®¸ã€‚
- ã€é‡ç‚¹ã€‘4ã€HashTable æ˜¯åŒæ­¥çš„ï¼Œè€Œ HashMap æ˜¯éåŒæ­¥çš„ï¼Œæ•ˆç‡ä¸Šæ¯” HashTable è¦é«˜ã€‚ä¹Ÿå› æ­¤ï¼ŒHashMap æ›´é€‚åˆäºå•çº¿ç¨‹ç¯å¢ƒï¼Œè€Œ HashTable é€‚åˆäºå¤šçº¿ç¨‹ç¯å¢ƒã€‚
- 5ã€HashMap çš„è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ˜¯ fail-fast è¿­ä»£å™¨ï¼ŒHashTableçš„ enumerator è¿­ä»£å™¨ä¸æ˜¯ fail-fast çš„ã€‚
- 6ã€HashTable ä¸­æ•°ç»„é»˜è®¤å¤§å°æ˜¯ 11 ï¼Œæ‰©å®¹æ–¹æ³•æ˜¯ `old * 2 + 1` ï¼ŒHashMap é»˜è®¤å¤§å°æ˜¯ 16 ï¼Œæ‰©å®¹æ¯æ¬¡ä¸º 2 çš„æŒ‡æ•°å¤§å°ã€‚

ä¸€èˆ¬ç°åœ¨ä¸å»ºè®®ç”¨ HashTable ã€‚ä¸»è¦åŸå› æ˜¯ä¸¤ç‚¹ï¼š

- ä¸€æ˜¯ï¼ŒHashTable æ˜¯é—ç•™ç±»ï¼Œå†…éƒ¨å®ç°å¾ˆå¤šæ²¡ä¼˜åŒ–å’Œå†—ä½™ã€‚
- äºŒæ˜¯ï¼Œå³ä½¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç°åœ¨ä¹Ÿæœ‰åŒæ­¥çš„ ConcurrentHashMap æ›¿ä»£ï¼Œæ²¡æœ‰å¿…è¦å› ä¸ºæ˜¯å¤šçº¿ç¨‹è€Œç”¨ Hashtable ã€‚

ğŸ¦… **Hashtable çš„ `#size()` æ–¹æ³•ä¸­æ˜æ˜åªæœ‰ä¸€æ¡è¯­å¥ `"return count;"` ï¼Œä¸ºä»€ä¹ˆè¿˜è¦åšåŒæ­¥ï¼Ÿ**

åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€æ¡çº¿ç¨‹æ‰§è¡Œå›ºå®šç±»çš„åŒæ­¥æ–¹æ³•ï¼Œä½†æ˜¯å¯¹äºç±»çš„éåŒæ­¥æ–¹æ³•ï¼Œå¯ä»¥å¤šæ¡çº¿ç¨‹åŒæ—¶è®¿é—®ã€‚æ‰€ä»¥ï¼Œè¿™æ ·å°±æœ‰é—®é¢˜äº†ï¼Œå¯èƒ½çº¿ç¨‹ A åœ¨æ‰§è¡Œ Hashtable çš„ put æ–¹æ³•æ·»åŠ æ•°æ®ï¼Œçº¿ç¨‹ B åˆ™å¯ä»¥æ­£å¸¸è°ƒç”¨ `#size()` æ–¹æ³•è¯»å– Hashtable ä¸­å½“å‰å…ƒç´ çš„ä¸ªæ•°ï¼Œé‚£è¯»å–åˆ°çš„å€¼å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼Œå¯èƒ½çº¿ç¨‹ A æ·»åŠ äº†å®Œäº†æ•°æ®ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹ `count++` ï¼Œçº¿ç¨‹ B å°±å·²ç»è¯»å– `count` äº†ï¼Œé‚£ä¹ˆå¯¹äºçº¿ç¨‹ B æ¥è¯´è¯»å–åˆ°çš„ `count` ä¸€å®šæ˜¯ä¸å‡†ç¡®çš„ã€‚

**è€Œç»™ `#size()` æ–¹æ³•åŠ äº†åŒæ­¥ä¹‹åï¼Œæ„å‘³ç€çº¿ç¨‹ B è°ƒç”¨ `#size()` æ–¹æ³•åªæœ‰åœ¨çº¿ç¨‹ A è°ƒç”¨ put æ–¹æ³•å®Œæ¯•ä¹‹åæ‰å¯ä»¥è°ƒç”¨ï¼Œè¿™æ ·å°±ä¿è¯äº†çº¿ç¨‹å®‰å…¨æ€§**ã€‚

## HashSet å’Œ HashMap çš„åŒºåˆ«ï¼Ÿ

- Set æ˜¯çº¿æ€§ç»“æ„ï¼Œå€¼ä¸èƒ½é‡å¤ã€‚HashSet æ˜¯ Set çš„ hash å®ç°ï¼ŒHashSet ä¸­å€¼ä¸èƒ½é‡å¤æ˜¯ç”¨ HashMap çš„ key æ¥å®ç°çš„ã€‚

- Map æ˜¯é”®å€¼å¯¹æ˜ å°„ï¼Œå¯ä»¥ç©ºé”®ç©ºå€¼ã€‚HashMap æ˜¯ Map çš„ hash å®ç°ï¼Œkey çš„å”¯ä¸€æ€§æ˜¯é€šè¿‡ key å€¼ hashcode çš„å”¯ä¸€æ¥ç¡®å®šï¼Œvalue å€¼æ˜¯åˆ™æ˜¯é“¾è¡¨ç»“æ„ã€‚

  > å› ä¸ºä¸åŒçš„ key å€¼ï¼Œå¯èƒ½æœ‰ç›¸åŒçš„ hashcode ï¼Œæ‰€ä»¥ value å€¼éœ€è¦æ˜¯é“¾è¡¨ç»“æ„ã€‚

ä»–ä»¬çš„å…±åŒç‚¹éƒ½æ˜¯ hash ç®—æ³•å®ç°çš„å”¯ä¸€æ€§ï¼Œä»–ä»¬éƒ½ä¸èƒ½æŒæœ‰åŸºæœ¬ç±»å‹ï¼Œåªèƒ½æŒæœ‰å¯¹è±¡ã€‚

> ä¸ºäº†æ›´å¥½çš„æ€§èƒ½ï¼ŒNetty è‡ªå·±å®ç°äº† key ä¸ºåŸºæœ¬ç±»å‹çš„ HashMap ï¼Œä¾‹å¦‚ [IntObjectHashMap](https://netty.io/4.1/api/io/netty/util/collection/IntObjectHashMap.html) ã€‚

## HashSet å’Œ TreeSet çš„åŒºåˆ«ï¼Ÿ

- HashSet æ˜¯ç”¨ä¸€ä¸ª hash è¡¨æ¥å®ç°çš„ï¼Œå› æ­¤ï¼Œå®ƒçš„å…ƒç´ æ˜¯æ— åºçš„ã€‚æ·»åŠ ï¼Œåˆ é™¤å’Œ HashSet åŒ…æ‹¬çš„æ–¹æ³•çš„æŒç»­æ—¶é—´å¤æ‚åº¦æ˜¯ `O(1)` ã€‚
- TreeSet æ˜¯ç”¨ä¸€ä¸ªæ ‘å½¢ç»“æ„å®ç°çš„ï¼Œå› æ­¤ï¼Œå®ƒæ˜¯æœ‰åºçš„ã€‚æ·»åŠ ï¼Œåˆ é™¤å’Œ TreeSet åŒ…å«çš„æ–¹æ³•çš„æŒç»­æ—¶é—´å¤æ‚åº¦æ˜¯ `O(logn)` ã€‚

ğŸ¦… **å¦‚ä½•å†³å®šé€‰ç”¨ HashMap è¿˜æ˜¯ TreeMapï¼Ÿ**

- å¯¹äºåœ¨ Map ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ è¿™ç±»æ“ä½œï¼ŒHashMap æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚
- ç„¶è€Œï¼Œå‡å¦‚ä½ éœ€è¦å¯¹ä¸€ä¸ªæœ‰åºçš„ key é›†åˆè¿›è¡Œéå†ï¼Œ TreeMap æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚

åŸºäºä½ çš„ collection çš„å¤§å°ï¼Œä¹Ÿè®¸å‘ HashMap ä¸­æ·»åŠ å…ƒç´ ä¼šæ›´å¿«ï¼Œå†å°† HashMap æ¢ä¸º TreeMap è¿›è¡Œæœ‰åº key çš„éå†ã€‚

## HashMap å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼Ÿ

ConcurrentHashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„ HashMap çš„å®ç°ã€‚ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š

- 1ã€ConcurrentHashMap å¯¹æ•´ä¸ªæ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†å‰²åˆ†æ®µ(Segment)ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ªåˆ†æ®µä¸Šéƒ½ç”¨ lock é”è¿›è¡Œä¿æŠ¤ï¼Œç›¸å¯¹ äºHashtable çš„ syn å…³é”®å­—é”çš„ç²’åº¦æ›´ç²¾ç»†äº†ä¸€äº›ï¼Œå¹¶å‘æ€§èƒ½æ›´å¥½ã€‚è€Œ HashMap æ²¡æœ‰é”æœºåˆ¶ï¼Œä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚

  > JDK8 ä¹‹åï¼ŒConcurrentHashMap å¯ç”¨äº†ä¸€ç§å…¨æ–°çš„æ–¹å¼å®ç°,åˆ©ç”¨ CAS ç®—æ³•ã€‚

- 2ã€HashMap çš„é”®å€¼å¯¹å…è®¸æœ‰ `null` ï¼Œä½†æ˜¯ ConCurrentHashMap éƒ½ä¸å…è®¸ã€‚

## é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Œåˆ—å‡ºå®ƒä»¬çš„åŒºåˆ«ï¼Ÿ

æ ˆå’Œé˜Ÿåˆ—ä¸¤è€…éƒ½è¢«ç”¨æ¥é¢„å­˜å‚¨æ•°æ®ã€‚

- ```
  java.util.Queue
  ```

   

  æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„å®ç°ç±»åœ¨Javaå¹¶å‘åŒ…ä¸­ã€‚

  - é˜Ÿåˆ—å…è®¸å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰æ£€ç´¢å…ƒç´ ï¼Œä½†å¹¶éæ€»æ˜¯è¿™æ ·ã€‚
  - Deque æ¥å£å…è®¸ä»ä¸¤ç«¯æ£€ç´¢å…ƒç´ ã€‚

- æ ˆä¸é˜Ÿåˆ—å¾ˆç›¸ä¼¼ï¼Œä½†å®ƒå…è®¸å¯¹å…ƒç´ è¿›è¡Œåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰è¿›è¡Œæ£€ç´¢ã€‚

  - Stack æ˜¯ä¸€ä¸ªæ‰©å±•è‡ª Vector çš„ç±»ï¼Œè€Œ Queue æ˜¯ä¸€ä¸ªæ¥å£ã€‚

# åŸç†

## HashMap çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ

æˆ‘ä»¬çŸ¥é“åœ¨ Java ä¸­æœ€å¸¸ç”¨çš„ä¸¤ç§ç»“æ„æ˜¯æ•°ç»„å’Œæ¨¡æ‹ŸæŒ‡é’ˆï¼ˆå¼•ç”¨ï¼‰ï¼Œå‡ ä¹æ‰€æœ‰çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥åˆ©ç”¨è¿™ä¸¤ç§æ¥ç»„åˆå®ç°ï¼ŒHashMap ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å®é™…ä¸Š HashMap æ˜¯ä¸€ä¸ª**â€œé“¾è¡¨æ•£åˆ—â€**ã€‚

HashMap æ˜¯åŸºäº hashing çš„åŸç†ã€‚

[HashMap å›¾è§£](http://dl.iteye.com/upload/attachment/177479/3f05dd61-955e-3eb2-bf8e-31da8a361148.jpg)

- æˆ‘ä»¬ä½¿ç”¨ `#put(key, value)` æ–¹æ³•æ¥å­˜å‚¨å¯¹è±¡åˆ° HashMap ä¸­ï¼Œä½¿ç”¨ `get(key)` æ–¹æ³•ä» HashMap ä¸­è·å–å¯¹è±¡ã€‚
- å½“æˆ‘ä»¬ç»™ `#put(key, value)` æ–¹æ³•ä¼ é€’é”®å’Œå€¼æ—¶ï¼Œæˆ‘ä»¬å…ˆå¯¹é”®è°ƒç”¨ `#hashCode()` æ–¹æ³•ï¼Œè¿”å›çš„ hashCode ç”¨äºæ‰¾åˆ° bucket ä½ç½®æ¥å‚¨å­˜ Entry å¯¹è±¡ã€‚

ğŸ¦… **å½“ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ**

å› ä¸º hashcode ç›¸åŒï¼Œæ‰€ä»¥å®ƒä»¬çš„ bucket ä½ç½®ç›¸åŒï¼Œâ€œç¢°æ’â€ä¼šå‘ç”Ÿã€‚

å› ä¸º HashMap ä½¿ç”¨é“¾è¡¨å­˜å‚¨å¯¹è±¡ï¼Œè¿™ä¸ª Entryï¼ˆåŒ…å«æœ‰é”®å€¼å¯¹çš„ Map.Entry å¯¹è±¡ï¼‰ä¼šå­˜å‚¨åœ¨é“¾è¡¨ä¸­ã€‚

ğŸ¦… **hashCode å’Œ equals æ–¹æ³•æœ‰ä½•é‡è¦æ€§ï¼Ÿ**

HashMap ä½¿ç”¨ key å¯¹è±¡çš„ `#hashCode()` å’Œ `#equals(Object obj)` æ–¹æ³•å»å†³å®š key-value å¯¹çš„ç´¢å¼•ã€‚å½“æˆ‘ä»¬è¯•ç€ä» HashMap ä¸­è·å–å€¼çš„æ—¶å€™ï¼Œè¿™äº›æ–¹æ³•ä¹Ÿä¼šè¢«ç”¨åˆ°ã€‚

- å¦‚æœè¿™ä¸¤ä¸ªæ–¹æ³•æ²¡æœ‰è¢«æ­£ç¡®åœ°å®ç°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªä¸åŒ Key ä¹Ÿè®¸ä¼šäº§ç”Ÿç›¸åŒçš„ `#hashCode()` å’Œ `#equals(Object obj)` è¾“å‡ºï¼ŒHashMap å°†ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ç›¸åŒçš„ï¼Œç„¶åè¦†ç›–å®ƒä»¬ï¼Œè€ŒéæŠŠå®ƒä»¬å­˜å‚¨åˆ°ä¸åŒçš„åœ°æ–¹ã€‚

åŒæ ·çš„ï¼Œæ‰€æœ‰ä¸å…è®¸å­˜å‚¨é‡å¤æ•°æ®çš„é›†åˆç±»éƒ½ä½¿ç”¨ `#hashCode()` å’Œ `#equals(Object obj)` å»æŸ¥æ‰¾é‡å¤ï¼Œæ‰€ä»¥æ­£ç¡®å®ç°å®ƒä»¬éå¸¸é‡è¦ã€‚`#hashCode()` å’Œ `#equals(Object obj)` æ–¹æ³•çš„å®ç°ï¼Œåº”è¯¥éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

- å¦‚æœ `o1.equals(o2)` ï¼Œé‚£ä¹ˆ `o1.hashCode() == o2.hashCode()` æ€»æ˜¯ä¸º `true` çš„ã€‚
- å¦‚æœ `o1.hashCode() == o2.hashCode()` ï¼Œå¹¶ä¸æ„å‘³ `o1.equals(o2)` ä¼šä¸º `true` ã€‚

ğŸ¦… **HashMap é»˜è®¤å®¹é‡æ˜¯å¤šå°‘ï¼Ÿ**

é»˜è®¤å®¹é‡éƒ½æ˜¯ 16 ï¼Œè´Ÿè½½å› å­æ˜¯ 0.75 ã€‚å°±æ˜¯å½“ HashMap å¡«å……äº† 75% çš„ busket æ˜¯å°±ä¼šæ‰©å®¹ï¼Œæœ€å°çš„å¯èƒ½æ€§æ˜¯ï¼ˆ`16 * 0.75 = 12`ï¼‰ï¼Œä¸€èˆ¬ä¸ºåŸå†…å­˜çš„ 2 å€ã€‚

ğŸ¦… **æœ‰å“ªäº›é¡ºåºçš„ HashMap å®ç°ç±»ï¼Ÿ**

- LinkedHashMap ï¼Œæ˜¯åŸºäºå…ƒç´ è¿›å…¥é›†åˆçš„é¡ºåºæˆ–è€…è¢«è®¿é—®çš„å…ˆåé¡ºåºæ’åºã€‚
- TreeMap ï¼Œæ˜¯åŸºäºå…ƒç´ çš„å›ºæœ‰é¡ºåº (ç”± Comparator æˆ–è€… Comparable ç¡®å®š)ã€‚

ğŸ¦… **æˆ‘ä»¬èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Ÿ**

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ key ï¼Œç„¶è€Œåœ¨ä½¿ç”¨å®ƒä»¬ä¹‹å‰ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š

- 1ã€å¦‚æœç±»é‡å†™äº† equals æ–¹æ³•ï¼Œå®ƒä¹Ÿåº”è¯¥é‡å†™ hashcode æ–¹æ³•ã€‚

- 2ã€ç±»çš„æ‰€æœ‰å®ä¾‹éœ€è¦éµå¾ªä¸ equals å’Œ hashcode ç›¸å…³çš„è§„åˆ™ã€‚

- 3ã€å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰ä½¿ç”¨ equals ï¼Œä½ ä¸åº”è¯¥åœ¨ hashcode ä¸­ä½¿ç”¨å®ƒã€‚

- 4ã€ç”¨æˆ·è‡ªå®šä¹‰ key ç±»çš„æœ€ä½³å®è·µæ˜¯ä½¿ä¹‹ä¸ºä¸å¯å˜çš„ï¼Œè¿™æ ·ï¼Œhashcode å€¼å¯ä»¥è¢«ç¼“å­˜èµ·æ¥ï¼Œæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ä¸å¯å˜çš„ç±»ä¹Ÿå¯ä»¥ç¡®ä¿hashcode å’Œ equals åœ¨æœªæ¥ä¸ä¼šæ”¹å˜ï¼Œè¿™æ ·å°±ä¼šè§£å†³ä¸å¯å˜ç›¸å…³çš„é—®é¢˜äº†ã€‚

  > æ¯”å¦‚ï¼Œæˆ‘æœ‰ä¸€ä¸ª ç±»MyKey ï¼Œåœ¨ HashMap ä¸­ä½¿ç”¨å®ƒã€‚ä»£ç å¦‚ä¸‹ï¼š

  

  ```
  //ä¼ é€’ç»™MyKeyçš„nameå‚æ•°è¢«ç”¨äºequals()å’ŒhashCode()ä¸­
  MyKey key = new MyKey('Pankaj'); //assume hashCode=1234
  myHashMap.put(key, 'Value');
  // ä»¥ä¸‹çš„ä»£ç ä¼šæ”¹å˜keyçš„hashCode()å’Œequals()å€¼
  key.setName('Amit'); //assume new hashCode=7890
  //ä¸‹é¢ä¼šè¿”å›nullï¼Œå› ä¸ºHashMapä¼šå°è¯•æŸ¥æ‰¾å­˜å‚¨åŒæ ·ç´¢å¼•çš„keyï¼Œè€Œkeyå·²è¢«æ”¹å˜äº†ï¼ŒåŒ¹é…å¤±è´¥ï¼Œè¿”å›null
  myHashMap.get(new MyKey('Pankaj'));
  ```

  

  - é‚£å°±æ˜¯ä¸ºä½• String å’Œ Integer è¢«ä½œä¸º HashMap çš„ key å¤§é‡ä½¿ç”¨ã€‚

ğŸ¦… **HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ**

ä¸ºäº†èƒ½è®© HashMap å­˜å–é«˜æ•ˆï¼Œå°½é‡è¾ƒå°‘ç¢°æ’ï¼Œä¹Ÿå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ï¼Œæ¯ä¸ªé“¾è¡¨/çº¢é»‘æ ‘é•¿åº¦å¤§è‡´ç›¸åŒã€‚è¿™ä¸ªå®ç°å°±æ˜¯æŠŠæ•°æ®å­˜åˆ°å“ªä¸ªé“¾è¡¨/çº¢é»‘æ ‘ä¸­çš„ç®—æ³•ã€‚

è¿™ä¸ªç®—æ³•åº”è¯¥å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿæˆ‘ä»¬é¦–å…ˆå¯èƒ½ä¼šæƒ³åˆ°é‡‡ç”¨ `%` å–ä½™çš„æ“ä½œæ¥å®ç°ã€‚ä½†æ˜¯ï¼Œé‡ç‚¹æ¥äº†ï¼š

- å–ä½™(`%`)æ“ä½œä¸­å¦‚æœé™¤æ•°æ˜¯ 2 çš„å¹‚æ¬¡åˆ™ç­‰ä»·äºä¸å…¶é™¤æ•°å‡ä¸€çš„ä¸(`&`)æ“ä½œï¼ˆä¹Ÿå°±æ˜¯è¯´ `hash % length == hash & (length - 1)` çš„å‰ææ˜¯ length æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼›ï¼‰ã€‚
- å¹¶ä¸”ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ `&`ï¼Œç›¸å¯¹äº `%` èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ï¼Œ

è¿™å°±è§£é‡Šäº† HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„å¹‚æ¬¡æ–¹ã€‚

## HashSet çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ

HashSet æ˜¯æ„å»ºåœ¨ HashMap ä¹‹ä¸Šçš„ Set hashing å®ç°ç±»ã€‚è®©æˆ‘ä»¬ç›´æ¥æ’¸ä¸‹æºç ï¼Œä»£ç å¦‚ä¸‹ï¼š



```
// HashSet.java

private transient HashMap<E,Object> map;

private static final Object PRESENT = new Object();
```



- `map` å±æ€§ï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª HashMap å¯¹è±¡æ—¶ï¼Œå…¶å†…éƒ¨ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ª `map` å¯¹è±¡ã€‚åç»­ HashSet æ‰€æœ‰çš„æ“ä½œï¼Œå®é™…éƒ½æ˜¯åŸºäºè¿™ä¸ª `map` ä¹‹ä¸Šçš„å°è£…ã€‚

- `PRESENT` é™æ€å±æ€§ï¼Œæ‰€æœ‰ `map` ä¸­ KEY å¯¹åº”çš„å€¼ï¼Œéƒ½æ˜¯å®ƒï¼Œé¿å…é‡å¤åˆ›å»ºã€‚

- OK ï¼Œå†æ¥çœ‹ä¸€çœ¼ add æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

  

  ```
  // HashSet.java
  
  public boolean add(E e) {
      return map.put(e, PRESENT) == null;
  }
  ```

  

  - æ˜¯ä¸æ˜¯ä¸€ç›®äº†ç„¶ã€‚

ğŸ¦… **HashSet å¦‚ä½•æ£€æŸ¥é‡å¤ï¼Ÿ**

> è‰¿è‰¿ï¼šæ­£å¦‚æˆ‘ä»¬ä¸Šé¢çœ‹åˆ° HashSet çš„å®ç°åŸç†ï¼Œæˆ‘ä»¬è‡ªç„¶å¯ä»¥æ¨å¯¼å‡ºï¼ŒHashMap ä¹Ÿæ˜¯å¦‚ä½•æ£€æŸ¥é‡å¤æ»´ã€‚

å¦‚ä¸‹æ‘˜å–è‡ª ã€ŠHead First Javaã€‹ ç¬¬äºŒç‰ˆï¼š

å½“ä½ æŠŠå¯¹è±¡åŠ å…¥ HashSet æ—¶ï¼ŒHashSetä¼šå…ˆè®¡ç®—å¯¹è±¡çš„hashcodeå€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸å…¶ä»–åŠ å…¥çš„å¯¹è±¡çš„hashcodeå€¼ä½œæ¯”è¾ƒã€‚

- å¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„ hashcode ï¼ŒHashSetä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚
- ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚
  - å¦‚æœä¸¤è€…ç›¸åŒï¼ŒHashSet å°±ä¸ä¼šè®©åŠ å…¥æ“ä½œæˆåŠŸã€‚
  - **å¦‚æœä¸¤è€…ä¸åŒï¼ŒHashSet å°±ä¼šè®©åŠ å…¥æ“ä½œæˆåŠŸ**ã€‚

## EnumSet æ˜¯ä»€ä¹ˆï¼Ÿ

`java.util.EnumSet` ï¼Œæ˜¯ä½¿ç”¨æšä¸¾ç±»å‹çš„é›†åˆå®ç°ã€‚

- å½“é›†åˆåˆ›å»ºæ—¶ï¼Œæšä¸¾é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ¥è‡ªå•ä¸ªæŒ‡å®šçš„æšä¸¾ç±»å‹ï¼Œå¯ä»¥æ˜¯æ˜¾ç¤ºçš„æˆ–éšç¤ºçš„ã€‚EnumSet æ˜¯ä¸åŒæ­¥çš„ï¼Œä¸å…è®¸å€¼ä¸º `null` çš„å…ƒç´ ã€‚
- å®ƒä¹Ÿæä¾›äº†ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚ `#copyOf(Collection c)`ã€`#of(E first, E... rest)` å’Œ `#complementOf(EnumSet s)` æ–¹æ³•ã€‚

å…³äº EnumSet çš„æºç è§£æï¼Œè§ [ã€ŠEnumSet æºç åˆ†æã€‹](https://blog.csdn.net/u010887744/article/details/50834738) æ–‡ç« ã€‚

## TODO TreeMap åŸç†

Java ä¸­çš„ TreeMap æ˜¯ä½¿ç”¨çº¢é»‘æ ‘å®ç°çš„ã€‚

TODO TreeMapå’ŒTreeSetåœ¨æ’åºæ—¶å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼ŸCollectionså·¥å…·ç±»ä¸­çš„sort()æ–¹æ³•å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼Ÿ

ç­‰åˆ°æºç è§£æåï¼Œåœ¨è¿›è¡Œè¡¥å……ã€‚

## Java Priority Queue æ˜¯ä»€ä¹ˆ?

PriorityQueue æ˜¯ä¸€ä¸ªåŸºäºä¼˜å…ˆçº§å †çš„æ— ç•Œé˜Ÿåˆ—ï¼Œå®ƒçš„å…ƒç´ éƒ½ä»¥ä»–ä»¬çš„è‡ªç„¶é¡ºåºæœ‰åºæ’åˆ—ã€‚

- åœ¨å®ƒåˆ›å»ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥æä¾›ä¸€ä¸ªæ¯”è¾ƒå™¨ Comparator æ¥è´Ÿè´£PriorityQueue ä¸­å…ƒç´ çš„æ’åºã€‚
- PriorityQueue ä¸å…è®¸ `` nullå…ƒç´ ï¼Œä¸å…è®¸ä¸æä¾›è‡ªç„¶æ’åºçš„å¯¹è±¡ï¼Œä¹Ÿä¸å…è®¸æ²¡æœ‰ä»»ä½•å…³è” Comparator çš„å¯¹è±¡ã€‚
- æœ€åï¼ŒPriorityQueue ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨æ‰§è¡Œå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œå®ƒéœ€è¦ `O(log(n))` çš„æ—¶é—´å¤æ‚åº¦ã€‚

ğŸ¦… **poll æ–¹æ³•å’Œ remove æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ**

poll å’Œ remove æ–¹æ³•ï¼Œéƒ½æ˜¯ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå·®åˆ«åœ¨äºï¼š

- poll æ–¹æ³•ï¼Œåœ¨è·å–å…ƒç´ å¤±è´¥çš„æ—¶å€™ä¼šè¿”å›ç©º
- remove() æ–¹æ³•ï¼Œå¤±è´¥çš„æ—¶å€™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

ğŸ¦… **LinkedHashMap å’Œ PriorityQueue çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**

- PriorityQueue ä¿è¯æœ€é«˜æˆ–è€…æœ€ä½ä¼˜å…ˆçº§çš„çš„å…ƒç´ æ€»æ˜¯åœ¨é˜Ÿåˆ—å¤´éƒ¨ï¼ŒLinkedHashMap ç»´æŒçš„é¡ºåºæ˜¯å…ƒç´ æ’å…¥çš„é¡ºåºã€‚
- å½“éå†ä¸€ä¸ª PriorityQueue æ—¶ï¼Œæ²¡æœ‰ä»»ä½•é¡ºåºä¿è¯ï¼Œä½†æ˜¯ LinkedHashMap è¯¾ä¿è¯éå†é¡ºåºæ˜¯å…ƒç´ æ’å…¥çš„é¡ºåºã€‚