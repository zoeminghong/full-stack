# 网络常见知识

### 粘包

#### 描述：

数据接收端，难于分辨数据是否是同一个请求中的。

#### 产生原因：

发送端为了将多个发往接收端的包，更有效的发到对方，使用了优化方法（Nagle算法），将多次间隔较小、数据量小的数据，合并成一个大的数据块，然后进行封包。

#### 解决方式：

增加消息头（消息来源地址，端口等信息）。

UDP，不会使用块的合并优化算法，在每个UDP包中都有了消息头，不会出现粘包现象。

(1)、发送固定长度的消息

(2)、把消息的尺寸与消息一块发送

(3)、使用特殊标记来区分消息间隔

#### 拓展：

TCP为了保证可靠传输，尽量减少额外开销（每次发包都要验证），因此采用了流式传输，面向流的传输，相对于面向消息的传输，可以减少发送包的数量，从而减少了额外开销。但是，对于数据传输频繁的程序来讲，使用TCP可能会容易粘包。

**但 TCP 中不带结构的流是不需要进行处理的（如文件传输）**，但在实际工程应用中，传输的数据一般为带结构的数据，这时就需要做分包处理。

https://blog.csdn.net/tiandijun/article/details/41961785

